{"dependencies":[{"name":"../../../dom/nodes","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":59,"index":59}}],"key":"Z+GW5Ist+DDyIe4BLHPS68wWHKY=","exportNames":["*"],"imports":1}},{"name":"../../../dom/types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":60},"end":{"line":2,"column":46,"index":106}}],"key":"9wWUuXr0x+E746pmPkWuV46KRwg=","exportNames":["*"],"imports":1}},{"name":"../../../skia/types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":107},"end":{"line":3,"column":48,"index":155}}],"key":"hnxlDT1tba4gQfvf2h/i6nte9KM=","exportNames":["*"],"imports":1}},{"name":"../Core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":156},"end":{"line":4,"column":38,"index":194}}],"key":"jbHyCzvbB9jS1IW5Slk1SdkNW+4=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"isPushColorFilter\", {\n    enumerable: true,\n    get: function () {\n      return isPushColorFilter;\n    }\n  });\n  Object.defineProperty(exports, \"composeColorFilters\", {\n    enumerable: true,\n    get: function () {\n      return composeColorFilters;\n    }\n  });\n  Object.defineProperty(exports, \"pushColorFilter\", {\n    enumerable: true,\n    get: function () {\n      return pushColorFilter;\n    }\n  });\n  var _domNodes = require(_dependencyMap[0], \"../../../dom/nodes\");\n  var _domTypes = require(_dependencyMap[1], \"../../../dom/types\");\n  var _skiaTypes = require(_dependencyMap[2], \"../../../skia/types\");\n  var _Core = require(_dependencyMap[3], \"../Core\");\n  const isPushColorFilter = command => {\n    \"worklet\";\n\n    return command.type === _Core.CommandType.PushColorFilter;\n  };\n  const isColorFilter = (command, type) => {\n    \"worklet\";\n\n    return command.colorFilterType === type;\n  };\n  const composeColorFilters = ctx => {\n    \"worklet\";\n\n    if (ctx.colorFilters.length > 1) {\n      const outer = ctx.colorFilters.pop();\n      const inner = ctx.colorFilters.pop();\n      ctx.colorFilters.push(ctx.Skia.ColorFilter.MakeCompose(outer, inner));\n    }\n  };\n  const pushColorFilter = (ctx, command) => {\n    \"worklet\";\n\n    let cf;\n    if (isColorFilter(command, _domTypes.NodeType.BlendColorFilter)) {\n      const {\n        props\n      } = command;\n      const {\n        mode\n      } = props;\n      const color = (0, _domNodes.processColor)(ctx.Skia, props.color);\n      cf = ctx.Skia.ColorFilter.MakeBlend(color, _skiaTypes.BlendMode[(0, _domNodes.enumKey)(mode)]);\n    } else if (isColorFilter(command, _domTypes.NodeType.MatrixColorFilter)) {\n      const {\n        matrix\n      } = command.props;\n      cf = ctx.Skia.ColorFilter.MakeMatrix(matrix);\n    } else if (isColorFilter(command, _domTypes.NodeType.LerpColorFilter)) {\n      const {\n        props\n      } = command;\n      const {\n        t\n      } = props;\n      const second = ctx.colorFilters.pop();\n      const first = ctx.colorFilters.pop();\n      if (!first || !second) {\n        throw new Error(\"LerpColorFilter requires two color filters\");\n      }\n      cf = ctx.Skia.ColorFilter.MakeLerp(t, first, second);\n    } else if (isColorFilter(command, _domTypes.NodeType.LumaColorFilter)) {\n      cf = ctx.Skia.ColorFilter.MakeLumaColorFilter();\n    } else if (isColorFilter(command, _domTypes.NodeType.LinearToSRGBGammaColorFilter)) {\n      cf = ctx.Skia.ColorFilter.MakeLinearToSRGBGamma();\n    } else if (isColorFilter(command, _domTypes.NodeType.SRGBToLinearGammaColorFilter)) {\n      cf = ctx.Skia.ColorFilter.MakeSRGBToLinearGamma();\n    }\n    if (!cf) {\n      throw new Error(`Unknown color filter type: ${command.colorFilterType}`);\n    }\n    ctx.colorFilters.push(cf);\n  };\n});","lineCount":91,"map":[[7,2,5,0,"Object"],[7,8,5,0],[7,9,5,0,"defineProperty"],[7,23,5,0],[7,24,5,0,"exports"],[7,31,5,0],[8,4,5,0,"enumerable"],[8,14,5,0],[9,4,5,0,"get"],[9,7,5,0],[9,18,5,0,"get"],[9,19,5,0],[10,6,5,0],[10,13,5,0,"isPushColorFilter"],[10,30,5,0],[11,4,5,0],[12,2,5,0],[13,2,15,0,"Object"],[13,8,15,0],[13,9,15,0,"defineProperty"],[13,23,15,0],[13,24,15,0,"exports"],[13,31,15,0],[14,4,15,0,"enumerable"],[14,14,15,0],[15,4,15,0,"get"],[15,7,15,0],[15,18,15,0,"get"],[15,19,15,0],[16,6,15,0],[16,13,15,0,"composeColorFilters"],[16,32,15,0],[17,4,15,0],[18,2,15,0],[19,2,24,0,"Object"],[19,8,24,0],[19,9,24,0,"defineProperty"],[19,23,24,0],[19,24,24,0,"exports"],[19,31,24,0],[20,4,24,0,"enumerable"],[20,14,24,0],[21,4,24,0,"get"],[21,7,24,0],[21,18,24,0,"get"],[21,19,24,0],[22,6,24,0],[22,13,24,0,"pushColorFilter"],[22,28,24,0],[23,4,24,0],[24,2,24,0],[25,2,1,0],[25,6,1,0,"_domNodes"],[25,15,1,0],[25,18,1,0,"require"],[25,25,1,0],[25,26,1,0,"_dependencyMap"],[25,40,1,0],[26,2,2,0],[26,6,2,0,"_domTypes"],[26,15,2,0],[26,18,2,0,"require"],[26,25,2,0],[26,26,2,0,"_dependencyMap"],[26,40,2,0],[27,2,3,0],[27,6,3,0,"_skiaTypes"],[27,16,3,0],[27,19,3,0,"require"],[27,26,3,0],[27,27,3,0,"_dependencyMap"],[27,41,3,0],[28,2,4,0],[28,6,4,0,"_Core"],[28,11,4,0],[28,14,4,0,"require"],[28,21,4,0],[28,22,4,0,"_dependencyMap"],[28,36,4,0],[29,2,5,7],[29,8,5,13,"isPushColorFilter"],[29,25,5,30],[29,28,5,33,"command"],[29,35,5,40],[29,39,5,44],[30,4,6,2],[30,13,6,11],[32,4,8,2],[32,11,8,9,"command"],[32,18,8,16],[32,19,8,17,"type"],[32,23,8,21],[32,28,8,26,"CommandType"],[32,33,8,37],[32,34,8,37,"CommandType"],[32,45,8,37],[32,46,8,38,"PushColorFilter"],[32,61,8,53],[33,2,9,0],[33,3,9,1],[34,2,10,0],[34,8,10,6,"isColorFilter"],[34,21,10,19],[34,24,10,22,"isColorFilter"],[34,25,10,23,"command"],[34,32,10,30],[34,34,10,32,"type"],[34,38,10,36],[34,43,10,41],[35,4,11,2],[35,13,11,11],[37,4,13,2],[37,11,13,9,"command"],[37,18,13,16],[37,19,13,17,"colorFilterType"],[37,34,13,32],[37,39,13,37,"type"],[37,43,13,41],[38,2,14,0],[38,3,14,1],[39,2,15,7],[39,8,15,13,"composeColorFilters"],[39,27,15,32],[39,30,15,35,"ctx"],[39,33,15,38],[39,37,15,42],[40,4,16,2],[40,13,16,11],[42,4,18,2],[42,8,18,6,"ctx"],[42,11,18,9],[42,12,18,10,"colorFilters"],[42,24,18,22],[42,25,18,23,"length"],[42,31,18,29],[42,34,18,32],[42,35,18,33],[42,37,18,35],[43,6,19,4],[43,12,19,10,"outer"],[43,17,19,15],[43,20,19,18,"ctx"],[43,23,19,21],[43,24,19,22,"colorFilters"],[43,36,19,34],[43,37,19,35,"pop"],[43,40,19,38],[43,41,19,39],[43,42,19,40],[44,6,20,4],[44,12,20,10,"inner"],[44,17,20,15],[44,20,20,18,"ctx"],[44,23,20,21],[44,24,20,22,"colorFilters"],[44,36,20,34],[44,37,20,35,"pop"],[44,40,20,38],[44,41,20,39],[44,42,20,40],[45,6,21,4,"ctx"],[45,9,21,7],[45,10,21,8,"colorFilters"],[45,22,21,20],[45,23,21,21,"push"],[45,27,21,25],[45,28,21,26,"ctx"],[45,31,21,29],[45,32,21,30,"Skia"],[45,36,21,34],[45,37,21,35,"ColorFilter"],[45,48,21,46],[45,49,21,47,"MakeCompose"],[45,60,21,58],[45,61,21,59,"outer"],[45,66,21,64],[45,68,21,66,"inner"],[45,73,21,71],[45,74,21,72],[45,75,21,73],[46,4,22,2],[47,2,23,0],[47,3,23,1],[48,2,24,7],[48,8,24,13,"pushColorFilter"],[48,23,24,28],[48,26,24,31,"pushColorFilter"],[48,27,24,32,"ctx"],[48,30,24,35],[48,32,24,37,"command"],[48,39,24,44],[48,44,24,49],[49,4,25,2],[49,13,25,11],[51,4,27,2],[51,8,27,6,"cf"],[51,10,27,8],[52,4,28,2],[52,8,28,6,"isColorFilter"],[52,21,28,19],[52,22,28,20,"command"],[52,29,28,27],[52,31,28,29,"NodeType"],[52,40,28,37],[52,41,28,37,"NodeType"],[52,49,28,37],[52,50,28,38,"BlendColorFilter"],[52,66,28,54],[52,67,28,55],[52,69,28,57],[53,6,29,4],[53,12,29,10],[54,8,30,6,"props"],[55,6,31,4],[55,7,31,5],[55,10,31,8,"command"],[55,17,31,15],[56,6,32,4],[56,12,32,10],[57,8,33,6,"mode"],[58,6,34,4],[58,7,34,5],[58,10,34,8,"props"],[58,15,34,13],[59,6,35,4],[59,12,35,10,"color"],[59,17,35,15],[59,20,35,18],[59,24,35,18,"processColor"],[59,33,35,30],[59,34,35,30,"processColor"],[59,46,35,30],[59,48,35,31,"ctx"],[59,51,35,34],[59,52,35,35,"Skia"],[59,56,35,39],[59,58,35,41,"props"],[59,63,35,46],[59,64,35,47,"color"],[59,69,35,52],[59,70,35,53],[60,6,36,4,"cf"],[60,8,36,6],[60,11,36,9,"ctx"],[60,14,36,12],[60,15,36,13,"Skia"],[60,19,36,17],[60,20,36,18,"ColorFilter"],[60,31,36,29],[60,32,36,30,"MakeBlend"],[60,41,36,39],[60,42,36,40,"color"],[60,47,36,45],[60,49,36,47,"BlendMode"],[60,59,36,56],[60,60,36,56,"BlendMode"],[60,69,36,56],[60,70,36,57],[60,74,36,57,"enumKey"],[60,83,36,64],[60,84,36,64,"enumKey"],[60,91,36,64],[60,93,36,65,"mode"],[60,97,36,69],[60,98,36,70],[60,99,36,71],[60,100,36,72],[61,4,37,2],[61,5,37,3],[61,11,37,9],[61,15,37,13,"isColorFilter"],[61,28,37,26],[61,29,37,27,"command"],[61,36,37,34],[61,38,37,36,"NodeType"],[61,47,37,44],[61,48,37,44,"NodeType"],[61,56,37,44],[61,57,37,45,"MatrixColorFilter"],[61,74,37,62],[61,75,37,63],[61,77,37,65],[62,6,38,4],[62,12,38,10],[63,8,39,6,"matrix"],[64,6,40,4],[64,7,40,5],[64,10,40,8,"command"],[64,17,40,15],[64,18,40,16,"props"],[64,23,40,21],[65,6,41,4,"cf"],[65,8,41,6],[65,11,41,9,"ctx"],[65,14,41,12],[65,15,41,13,"Skia"],[65,19,41,17],[65,20,41,18,"ColorFilter"],[65,31,41,29],[65,32,41,30,"MakeMatrix"],[65,42,41,40],[65,43,41,41,"matrix"],[65,49,41,47],[65,50,41,48],[66,4,42,2],[66,5,42,3],[66,11,42,9],[66,15,42,13,"isColorFilter"],[66,28,42,26],[66,29,42,27,"command"],[66,36,42,34],[66,38,42,36,"NodeType"],[66,47,42,44],[66,48,42,44,"NodeType"],[66,56,42,44],[66,57,42,45,"LerpColorFilter"],[66,72,42,60],[66,73,42,61],[66,75,42,63],[67,6,43,4],[67,12,43,10],[68,8,44,6,"props"],[69,6,45,4],[69,7,45,5],[69,10,45,8,"command"],[69,17,45,15],[70,6,46,4],[70,12,46,10],[71,8,47,6,"t"],[72,6,48,4],[72,7,48,5],[72,10,48,8,"props"],[72,15,48,13],[73,6,49,4],[73,12,49,10,"second"],[73,18,49,16],[73,21,49,19,"ctx"],[73,24,49,22],[73,25,49,23,"colorFilters"],[73,37,49,35],[73,38,49,36,"pop"],[73,41,49,39],[73,42,49,40],[73,43,49,41],[74,6,50,4],[74,12,50,10,"first"],[74,17,50,15],[74,20,50,18,"ctx"],[74,23,50,21],[74,24,50,22,"colorFilters"],[74,36,50,34],[74,37,50,35,"pop"],[74,40,50,38],[74,41,50,39],[74,42,50,40],[75,6,51,4],[75,10,51,8],[75,11,51,9,"first"],[75,16,51,14],[75,20,51,18],[75,21,51,19,"second"],[75,27,51,25],[75,29,51,27],[76,8,52,6],[76,14,52,12],[76,18,52,16,"Error"],[76,23,52,21],[76,24,52,22],[76,68,52,66],[76,69,52,67],[77,6,53,4],[78,6,54,4,"cf"],[78,8,54,6],[78,11,54,9,"ctx"],[78,14,54,12],[78,15,54,13,"Skia"],[78,19,54,17],[78,20,54,18,"ColorFilter"],[78,31,54,29],[78,32,54,30,"MakeLerp"],[78,40,54,38],[78,41,54,39,"t"],[78,42,54,40],[78,44,54,42,"first"],[78,49,54,47],[78,51,54,49,"second"],[78,57,54,55],[78,58,54,56],[79,4,55,2],[79,5,55,3],[79,11,55,9],[79,15,55,13,"isColorFilter"],[79,28,55,26],[79,29,55,27,"command"],[79,36,55,34],[79,38,55,36,"NodeType"],[79,47,55,44],[79,48,55,44,"NodeType"],[79,56,55,44],[79,57,55,45,"LumaColorFilter"],[79,72,55,60],[79,73,55,61],[79,75,55,63],[80,6,56,4,"cf"],[80,8,56,6],[80,11,56,9,"ctx"],[80,14,56,12],[80,15,56,13,"Skia"],[80,19,56,17],[80,20,56,18,"ColorFilter"],[80,31,56,29],[80,32,56,30,"MakeLumaColorFilter"],[80,51,56,49],[80,52,56,50],[80,53,56,51],[81,4,57,2],[81,5,57,3],[81,11,57,9],[81,15,57,13,"isColorFilter"],[81,28,57,26],[81,29,57,27,"command"],[81,36,57,34],[81,38,57,36,"NodeType"],[81,47,57,44],[81,48,57,44,"NodeType"],[81,56,57,44],[81,57,57,45,"LinearToSRGBGammaColorFilter"],[81,85,57,73],[81,86,57,74],[81,88,57,76],[82,6,58,4,"cf"],[82,8,58,6],[82,11,58,9,"ctx"],[82,14,58,12],[82,15,58,13,"Skia"],[82,19,58,17],[82,20,58,18,"ColorFilter"],[82,31,58,29],[82,32,58,30,"MakeLinearToSRGBGamma"],[82,53,58,51],[82,54,58,52],[82,55,58,53],[83,4,59,2],[83,5,59,3],[83,11,59,9],[83,15,59,13,"isColorFilter"],[83,28,59,26],[83,29,59,27,"command"],[83,36,59,34],[83,38,59,36,"NodeType"],[83,47,59,44],[83,48,59,44,"NodeType"],[83,56,59,44],[83,57,59,45,"SRGBToLinearGammaColorFilter"],[83,85,59,73],[83,86,59,74],[83,88,59,76],[84,6,60,4,"cf"],[84,8,60,6],[84,11,60,9,"ctx"],[84,14,60,12],[84,15,60,13,"Skia"],[84,19,60,17],[84,20,60,18,"ColorFilter"],[84,31,60,29],[84,32,60,30,"MakeSRGBToLinearGamma"],[84,53,60,51],[84,54,60,52],[84,55,60,53],[85,4,61,2],[86,4,62,2],[86,8,62,6],[86,9,62,7,"cf"],[86,11,62,9],[86,13,62,11],[87,6,63,4],[87,12,63,10],[87,16,63,14,"Error"],[87,21,63,19],[87,22,63,20],[87,52,63,50,"command"],[87,59,63,57],[87,60,63,58,"colorFilterType"],[87,75,63,73],[87,77,63,75],[87,78,63,76],[88,4,64,2],[89,4,65,2,"ctx"],[89,7,65,5],[89,8,65,6,"colorFilters"],[89,20,65,18],[89,21,65,19,"push"],[89,25,65,23],[89,26,65,24,"cf"],[89,28,65,26],[89,29,65,27],[90,2,66,0],[90,3,66,1],[91,0,66,2],[91,3]],"functionMap":{"names":["<global>","isPushColorFilter","isColorFilter","composeColorFilters","pushColorFilter"],"mappings":"AAA;iCCI;CDI;sBEC;CFI;mCGC;CHQ;+BIC;CJ0C"},"hasCjsExports":false},"type":"js/module"}]}