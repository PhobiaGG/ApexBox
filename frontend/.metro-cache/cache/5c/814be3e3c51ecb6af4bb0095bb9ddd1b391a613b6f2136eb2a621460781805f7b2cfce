{"dependencies":[{"name":"../../../dom/nodes","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":5,"column":28,"index":91}}],"key":"Z+GW5Ist+DDyIe4BLHPS68wWHKY=","exportNames":["*"],"imports":1}},{"name":"../../../skia/types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":227},"end":{"line":8,"column":54,"index":281}}],"key":"hnxlDT1tba4gQfvf2h/i6nte9KM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"saveCTM\", {\n    enumerable: true,\n    get: function () {\n      return saveCTM;\n    }\n  });\n  var _domNodes = require(_dependencyMap[0], \"../../../dom/nodes\");\n  var _skiaTypes = require(_dependencyMap[1], \"../../../skia/types\");\n  var computeClip = (Skia, clip) => {\n    \"worklet\";\n\n    if (clip) {\n      if ((0, _domNodes.isPathDef)(clip)) {\n        return {\n          clipPath: (0, _domNodes.processPath)(Skia, clip)\n        };\n      } else if ((0, _skiaTypes.isRRect)(clip)) {\n        return {\n          clipRRect: clip\n        };\n      } else {\n        return {\n          clipRect: clip\n        };\n      }\n    }\n    return undefined;\n  };\n  var saveCTM = (ctx, props) => {\n    \"worklet\";\n\n    var canvas = ctx.canvas,\n      Skia = ctx.Skia;\n    var _ref = props,\n      rawClip = _ref.clip,\n      invertClip = _ref.invertClip,\n      matrix = _ref.matrix,\n      transform = _ref.transform,\n      origin = _ref.origin,\n      layer = _ref.layer;\n    var hasTransform = matrix !== undefined || transform !== undefined;\n    var clip = computeClip(Skia, rawClip);\n    var hasClip = clip !== undefined;\n    var op = invertClip ? _skiaTypes.ClipOp.Difference : _skiaTypes.ClipOp.Intersect;\n    var m3 = (0, _domNodes.processTransformProps2)(Skia, {\n      matrix,\n      transform,\n      origin\n    });\n    var shouldSave = hasTransform || hasClip || !!layer;\n    if (shouldSave) {\n      if (layer) {\n        if (typeof layer === \"boolean\") {\n          canvas.saveLayer();\n        } else {\n          canvas.saveLayer(layer);\n        }\n      } else {\n        canvas.save();\n      }\n    }\n    if (m3) {\n      canvas.concat(m3);\n    }\n    if (clip) {\n      if (\"clipRect\" in clip) {\n        canvas.clipRect(clip.clipRect, op, true);\n      } else if (\"clipRRect\" in clip) {\n        canvas.clipRRect(clip.clipRRect, op, true);\n      } else {\n        canvas.clipPath(clip.clipPath, op, true);\n      }\n    }\n  };\n});","lineCount":81,"map":[[7,2,32,0,"Object"],[7,8,32,0],[7,9,32,0,"defineProperty"],[7,23,32,0],[7,24,32,0,"exports"],[7,31,32,0],[8,4,32,0,"enumerable"],[8,14,32,0],[9,4,32,0,"get"],[9,7,32,0],[9,18,32,0,"get"],[9,19,32,0],[10,6,32,0],[10,13,32,0,"saveCTM"],[10,20,32,0],[11,4,32,0],[12,2,32,0],[13,2,1,0],[13,6,1,0,"_domNodes"],[13,15,1,0],[13,18,1,0,"require"],[13,25,1,0],[13,26,1,0,"_dependencyMap"],[13,40,1,0],[14,2,8,0],[14,6,8,0,"_skiaTypes"],[14,16,8,0],[14,19,8,0,"require"],[14,26,8,0],[14,27,8,0,"_dependencyMap"],[14,41,8,0],[15,2,11,0],[15,6,11,6,"computeClip"],[15,17,11,17],[15,20,11,20,"computeClip"],[15,21,12,2,"Skia"],[15,25,12,12],[15,27,13,2,"clip"],[15,31,13,27],[15,36,18,30],[16,4,19,2],[16,13,19,11],[18,4,20,2],[18,8,20,6,"clip"],[18,12,20,10],[18,14,20,12],[19,6,21,4],[19,10,21,8],[19,14,21,8,"isPathDef"],[19,23,21,17],[19,24,21,17,"isPathDef"],[19,33,21,17],[19,35,21,18,"clip"],[19,39,21,22],[19,40,21,23],[19,42,21,25],[20,8,22,6],[20,15,22,13],[21,10,22,15,"clipPath"],[21,18,22,23],[21,20,22,25],[21,24,22,25,"processPath"],[21,33,22,36],[21,34,22,36,"processPath"],[21,45,22,36],[21,47,22,37,"Skia"],[21,51,22,41],[21,53,22,43,"clip"],[21,57,22,47],[22,8,22,49],[22,9,22,50],[23,6,23,4],[23,7,23,5],[23,13,23,11],[23,17,23,15],[23,21,23,15,"isRRect"],[23,31,23,22],[23,32,23,22,"isRRect"],[23,39,23,22],[23,41,23,23,"clip"],[23,45,23,27],[23,46,23,28],[23,48,23,30],[24,8,24,6],[24,15,24,13],[25,10,24,15,"clipRRect"],[25,19,24,24],[25,21,24,26,"clip"],[26,8,24,31],[26,9,24,32],[27,6,25,4],[27,7,25,5],[27,13,25,11],[28,8,26,6],[28,15,26,13],[29,10,26,15,"clipRect"],[29,18,26,23],[29,20,26,25,"clip"],[30,8,26,30],[30,9,26,31],[31,6,27,4],[32,4,28,2],[33,4,29,2],[33,11,29,9,"undefined"],[33,20,29,18],[34,2,30,0],[34,3,30,1],[35,2,32,7],[35,6,32,13,"saveCTM"],[35,13,32,20],[35,16,32,23,"saveCTM"],[35,17,32,24,"ctx"],[35,20,32,43],[35,22,32,45,"props"],[35,27,32,60],[35,32,32,65],[36,4,33,2],[36,13,33,11],[38,4,34,2],[38,8,34,10,"canvas"],[38,14,34,16],[38,17,34,27,"ctx"],[38,20,34,30],[38,21,34,10,"canvas"],[38,27,34,16],[39,6,34,18,"Skia"],[39,10,34,22],[39,13,34,27,"ctx"],[39,16,34,30],[39,17,34,18,"Skia"],[39,21,34,22],[40,4,35,2],[40,8,35,2,"_ref"],[40,12,35,2],[40,15,42,6,"props"],[40,20,42,11],[41,6,36,10,"rawClip"],[41,13,36,17],[41,16,36,17,"_ref"],[41,20,36,17],[41,21,36,4,"clip"],[41,25,36,8],[42,6,37,4,"invertClip"],[42,16,37,14],[42,19,37,14,"_ref"],[42,23,37,14],[42,24,37,4,"invertClip"],[42,34,37,14],[43,6,38,4,"matrix"],[43,12,38,10],[43,15,38,10,"_ref"],[43,19,38,10],[43,20,38,4,"matrix"],[43,26,38,10],[44,6,39,4,"transform"],[44,15,39,13],[44,18,39,13,"_ref"],[44,22,39,13],[44,23,39,4,"transform"],[44,32,39,13],[45,6,40,4,"origin"],[45,12,40,10],[45,15,40,10,"_ref"],[45,19,40,10],[45,20,40,4,"origin"],[45,26,40,10],[46,6,41,4,"layer"],[46,11,41,9],[46,14,41,9,"_ref"],[46,18,41,9],[46,19,41,4,"layer"],[46,24,41,9],[47,4,43,2],[47,8,43,8,"hasTransform"],[47,20,43,20],[47,23,43,23,"matrix"],[47,29,43,29],[47,34,43,34,"undefined"],[47,43,43,43],[47,47,43,47,"transform"],[47,56,43,56],[47,61,43,61,"undefined"],[47,70,43,70],[48,4,44,2],[48,8,44,8,"clip"],[48,12,44,12],[48,15,44,15,"computeClip"],[48,26,44,26],[48,27,44,27,"Skia"],[48,31,44,31],[48,33,44,33,"rawClip"],[48,40,44,40],[48,41,44,41],[49,4,45,2],[49,8,45,8,"hasClip"],[49,15,45,15],[49,18,45,18,"clip"],[49,22,45,22],[49,27,45,27,"undefined"],[49,36,45,36],[50,4,46,2],[50,8,46,8,"op"],[50,10,46,10],[50,13,46,13,"invertClip"],[50,23,46,23],[50,26,46,26,"ClipOp"],[50,36,46,32],[50,37,46,32,"ClipOp"],[50,43,46,32],[50,44,46,33,"Difference"],[50,54,46,43],[50,57,46,46,"ClipOp"],[50,67,46,52],[50,68,46,52,"ClipOp"],[50,74,46,52],[50,75,46,53,"Intersect"],[50,84,46,62],[51,4,47,2],[51,8,47,8,"m3"],[51,10,47,10],[51,13,47,13],[51,17,47,13,"processTransformProps2"],[51,26,47,35],[51,27,47,35,"processTransformProps2"],[51,49,47,35],[51,51,47,36,"Skia"],[51,55,47,40],[51,57,47,42],[52,6,47,44,"matrix"],[52,12,47,50],[53,6,47,52,"transform"],[53,15,47,61],[54,6,47,63,"origin"],[55,4,47,70],[55,5,47,71],[55,6,47,72],[56,4,48,2],[56,8,48,8,"shouldSave"],[56,18,48,18],[56,21,48,21,"hasTransform"],[56,33,48,33],[56,37,48,37,"hasClip"],[56,44,48,44],[56,48,48,48],[56,49,48,49],[56,50,48,50,"layer"],[56,55,48,55],[57,4,49,2],[57,8,49,6,"shouldSave"],[57,18,49,16],[57,20,49,18],[58,6,50,4],[58,10,50,8,"layer"],[58,15,50,13],[58,17,50,15],[59,8,51,6],[59,12,51,10],[59,19,51,17,"layer"],[59,24,51,22],[59,29,51,27],[59,38,51,36],[59,40,51,38],[60,10,52,8,"canvas"],[60,16,52,14],[60,17,52,15,"saveLayer"],[60,26,52,24],[60,27,52,25],[60,28,52,26],[61,8,53,6],[61,9,53,7],[61,15,53,13],[62,10,54,8,"canvas"],[62,16,54,14],[62,17,54,15,"saveLayer"],[62,26,54,24],[62,27,54,25,"layer"],[62,32,54,30],[62,33,54,31],[63,8,55,6],[64,6,56,4],[64,7,56,5],[64,13,56,11],[65,8,57,6,"canvas"],[65,14,57,12],[65,15,57,13,"save"],[65,19,57,17],[65,20,57,18],[65,21,57,19],[66,6,58,4],[67,4,59,2],[68,4,60,2],[68,8,60,6,"m3"],[68,10,60,8],[68,12,60,10],[69,6,61,4,"canvas"],[69,12,61,10],[69,13,61,11,"concat"],[69,19,61,17],[69,20,61,18,"m3"],[69,22,61,20],[69,23,61,21],[70,4,62,2],[71,4,63,2],[71,8,63,6,"clip"],[71,12,63,10],[71,14,63,12],[72,6,64,4],[72,10,64,8],[72,20,64,18],[72,24,64,22,"clip"],[72,28,64,26],[72,30,64,28],[73,8,65,6,"canvas"],[73,14,65,12],[73,15,65,13,"clipRect"],[73,23,65,21],[73,24,65,22,"clip"],[73,28,65,26],[73,29,65,27,"clipRect"],[73,37,65,35],[73,39,65,37,"op"],[73,41,65,39],[73,43,65,41],[73,47,65,45],[73,48,65,46],[74,6,66,4],[74,7,66,5],[74,13,66,11],[74,17,66,15],[74,28,66,26],[74,32,66,30,"clip"],[74,36,66,34],[74,38,66,36],[75,8,67,6,"canvas"],[75,14,67,12],[75,15,67,13,"clipRRect"],[75,24,67,22],[75,25,67,23,"clip"],[75,29,67,27],[75,30,67,28,"clipRRect"],[75,39,67,37],[75,41,67,39,"op"],[75,43,67,41],[75,45,67,43],[75,49,67,47],[75,50,67,48],[76,6,68,4],[76,7,68,5],[76,13,68,11],[77,8,69,6,"canvas"],[77,14,69,12],[77,15,69,13,"clipPath"],[77,23,69,21],[77,24,69,22,"clip"],[77,28,69,26],[77,29,69,27,"clipPath"],[77,37,69,35],[77,39,69,37,"op"],[77,41,69,39],[77,43,69,41],[77,47,69,45],[77,48,69,46],[78,6,70,4],[79,4,71,2],[80,2,72,0],[80,3,72,1],[81,0,72,2],[81,3]],"functionMap":{"names":["<global>","computeClip","saveCTM"],"mappings":"AAA;oBCU;CDmB;uBEE;CFwC"},"hasCjsExports":false},"type":"js/module"}]}