{"dependencies":[{"name":"../../../dom/nodes","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":84,"index":84}}],"key":"Z+GW5Ist+DDyIe4BLHPS68wWHKY=","exportNames":["*"],"imports":1}},{"name":"../../../skia/types","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":85},"end":{"line":2,"column":54,"index":139}}],"key":"hnxlDT1tba4gQfvf2h/i6nte9KM=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"saveCTM\", {\n    enumerable: true,\n    get: function () {\n      return saveCTM;\n    }\n  });\n  var _domNodes = require(_dependencyMap[0], \"../../../dom/nodes\");\n  var _skiaTypes = require(_dependencyMap[1], \"../../../skia/types\");\n  const computeClip = (Skia, clip) => {\n    \"worklet\";\n\n    if (clip) {\n      if ((0, _domNodes.isPathDef)(clip)) {\n        return {\n          clipPath: (0, _domNodes.processPath)(Skia, clip)\n        };\n      } else if ((0, _skiaTypes.isRRect)(clip)) {\n        return {\n          clipRRect: clip\n        };\n      } else {\n        return {\n          clipRect: clip\n        };\n      }\n    }\n    return undefined;\n  };\n  const saveCTM = (ctx, props) => {\n    \"worklet\";\n\n    const {\n      canvas,\n      Skia\n    } = ctx;\n    const {\n      clip: rawClip,\n      invertClip,\n      matrix,\n      transform,\n      origin,\n      layer\n    } = props;\n    const hasTransform = matrix !== undefined || transform !== undefined;\n    const clip = computeClip(Skia, rawClip);\n    const hasClip = clip !== undefined;\n    const op = invertClip ? _skiaTypes.ClipOp.Difference : _skiaTypes.ClipOp.Intersect;\n    const m3 = (0, _domNodes.processTransformProps2)(Skia, {\n      matrix,\n      transform,\n      origin\n    });\n    const shouldSave = hasTransform || hasClip || !!layer;\n    if (shouldSave) {\n      if (layer) {\n        if (typeof layer === \"boolean\") {\n          canvas.saveLayer();\n        } else {\n          canvas.saveLayer(layer);\n        }\n      } else {\n        canvas.save();\n      }\n    }\n    if (m3) {\n      canvas.concat(m3);\n    }\n    if (clip) {\n      if (\"clipRect\" in clip) {\n        canvas.clipRect(clip.clipRect, op, true);\n      } else if (\"clipRRect\" in clip) {\n        canvas.clipRRect(clip.clipRRect, op, true);\n      } else {\n        canvas.clipPath(clip.clipPath, op, true);\n      }\n    }\n  };\n});","lineCount":84,"map":[[7,2,23,0,"Object"],[7,8,23,0],[7,9,23,0,"defineProperty"],[7,23,23,0],[7,24,23,0,"exports"],[7,31,23,0],[8,4,23,0,"enumerable"],[8,14,23,0],[9,4,23,0,"get"],[9,7,23,0],[9,18,23,0,"get"],[9,19,23,0],[10,6,23,0],[10,13,23,0,"saveCTM"],[10,20,23,0],[11,4,23,0],[12,2,23,0],[13,2,1,0],[13,6,1,0,"_domNodes"],[13,15,1,0],[13,18,1,0,"require"],[13,25,1,0],[13,26,1,0,"_dependencyMap"],[13,40,1,0],[14,2,2,0],[14,6,2,0,"_skiaTypes"],[14,16,2,0],[14,19,2,0,"require"],[14,26,2,0],[14,27,2,0,"_dependencyMap"],[14,41,2,0],[15,2,3,0],[15,8,3,6,"computeClip"],[15,19,3,17],[15,22,3,20,"computeClip"],[15,23,3,21,"Skia"],[15,27,3,25],[15,29,3,27,"clip"],[15,33,3,31],[15,38,3,36],[16,4,4,2],[16,13,4,11],[18,4,6,2],[18,8,6,6,"clip"],[18,12,6,10],[18,14,6,12],[19,6,7,4],[19,10,7,8],[19,14,7,8,"isPathDef"],[19,23,7,17],[19,24,7,17,"isPathDef"],[19,33,7,17],[19,35,7,18,"clip"],[19,39,7,22],[19,40,7,23],[19,42,7,25],[20,8,8,6],[20,15,8,13],[21,10,9,8,"clipPath"],[21,18,9,16],[21,20,9,18],[21,24,9,18,"processPath"],[21,33,9,29],[21,34,9,29,"processPath"],[21,45,9,29],[21,47,9,30,"Skia"],[21,51,9,34],[21,53,9,36,"clip"],[21,57,9,40],[22,8,10,6],[22,9,10,7],[23,6,11,4],[23,7,11,5],[23,13,11,11],[23,17,11,15],[23,21,11,15,"isRRect"],[23,31,11,22],[23,32,11,22,"isRRect"],[23,39,11,22],[23,41,11,23,"clip"],[23,45,11,27],[23,46,11,28],[23,48,11,30],[24,8,12,6],[24,15,12,13],[25,10,13,8,"clipRRect"],[25,19,13,17],[25,21,13,19,"clip"],[26,8,14,6],[26,9,14,7],[27,6,15,4],[27,7,15,5],[27,13,15,11],[28,8,16,6],[28,15,16,13],[29,10,17,8,"clipRect"],[29,18,17,16],[29,20,17,18,"clip"],[30,8,18,6],[30,9,18,7],[31,6,19,4],[32,4,20,2],[33,4,21,2],[33,11,21,9,"undefined"],[33,20,21,18],[34,2,22,0],[34,3,22,1],[35,2,23,7],[35,8,23,13,"saveCTM"],[35,15,23,20],[35,18,23,23,"saveCTM"],[35,19,23,24,"ctx"],[35,22,23,27],[35,24,23,29,"props"],[35,29,23,34],[35,34,23,39],[36,4,24,2],[36,13,24,11],[38,4,26,2],[38,10,26,8],[39,6,27,4,"canvas"],[39,12,27,10],[40,6,28,4,"Skia"],[41,4,29,2],[41,5,29,3],[41,8,29,6,"ctx"],[41,11,29,9],[42,4,30,2],[42,10,30,8],[43,6,31,4,"clip"],[43,10,31,8],[43,12,31,10,"rawClip"],[43,19,31,17],[44,6,32,4,"invertClip"],[44,16,32,14],[45,6,33,4,"matrix"],[45,12,33,10],[46,6,34,4,"transform"],[46,15,34,13],[47,6,35,4,"origin"],[47,12,35,10],[48,6,36,4,"layer"],[49,4,37,2],[49,5,37,3],[49,8,37,6,"props"],[49,13,37,11],[50,4,38,2],[50,10,38,8,"hasTransform"],[50,22,38,20],[50,25,38,23,"matrix"],[50,31,38,29],[50,36,38,34,"undefined"],[50,45,38,43],[50,49,38,47,"transform"],[50,58,38,56],[50,63,38,61,"undefined"],[50,72,38,70],[51,4,39,2],[51,10,39,8,"clip"],[51,14,39,12],[51,17,39,15,"computeClip"],[51,28,39,26],[51,29,39,27,"Skia"],[51,33,39,31],[51,35,39,33,"rawClip"],[51,42,39,40],[51,43,39,41],[52,4,40,2],[52,10,40,8,"hasClip"],[52,17,40,15],[52,20,40,18,"clip"],[52,24,40,22],[52,29,40,27,"undefined"],[52,38,40,36],[53,4,41,2],[53,10,41,8,"op"],[53,12,41,10],[53,15,41,13,"invertClip"],[53,25,41,23],[53,28,41,26,"ClipOp"],[53,38,41,32],[53,39,41,32,"ClipOp"],[53,45,41,32],[53,46,41,33,"Difference"],[53,56,41,43],[53,59,41,46,"ClipOp"],[53,69,41,52],[53,70,41,52,"ClipOp"],[53,76,41,52],[53,77,41,53,"Intersect"],[53,86,41,62],[54,4,42,2],[54,10,42,8,"m3"],[54,12,42,10],[54,15,42,13],[54,19,42,13,"processTransformProps2"],[54,28,42,35],[54,29,42,35,"processTransformProps2"],[54,51,42,35],[54,53,42,36,"Skia"],[54,57,42,40],[54,59,42,42],[55,6,43,4,"matrix"],[55,12,43,10],[56,6,44,4,"transform"],[56,15,44,13],[57,6,45,4,"origin"],[58,4,46,2],[58,5,46,3],[58,6,46,4],[59,4,47,2],[59,10,47,8,"shouldSave"],[59,20,47,18],[59,23,47,21,"hasTransform"],[59,35,47,33],[59,39,47,37,"hasClip"],[59,46,47,44],[59,50,47,48],[59,51,47,49],[59,52,47,50,"layer"],[59,57,47,55],[60,4,48,2],[60,8,48,6,"shouldSave"],[60,18,48,16],[60,20,48,18],[61,6,49,4],[61,10,49,8,"layer"],[61,15,49,13],[61,17,49,15],[62,8,50,6],[62,12,50,10],[62,19,50,17,"layer"],[62,24,50,22],[62,29,50,27],[62,38,50,36],[62,40,50,38],[63,10,51,8,"canvas"],[63,16,51,14],[63,17,51,15,"saveLayer"],[63,26,51,24],[63,27,51,25],[63,28,51,26],[64,8,52,6],[64,9,52,7],[64,15,52,13],[65,10,53,8,"canvas"],[65,16,53,14],[65,17,53,15,"saveLayer"],[65,26,53,24],[65,27,53,25,"layer"],[65,32,53,30],[65,33,53,31],[66,8,54,6],[67,6,55,4],[67,7,55,5],[67,13,55,11],[68,8,56,6,"canvas"],[68,14,56,12],[68,15,56,13,"save"],[68,19,56,17],[68,20,56,18],[68,21,56,19],[69,6,57,4],[70,4,58,2],[71,4,59,2],[71,8,59,6,"m3"],[71,10,59,8],[71,12,59,10],[72,6,60,4,"canvas"],[72,12,60,10],[72,13,60,11,"concat"],[72,19,60,17],[72,20,60,18,"m3"],[72,22,60,20],[72,23,60,21],[73,4,61,2],[74,4,62,2],[74,8,62,6,"clip"],[74,12,62,10],[74,14,62,12],[75,6,63,4],[75,10,63,8],[75,20,63,18],[75,24,63,22,"clip"],[75,28,63,26],[75,30,63,28],[76,8,64,6,"canvas"],[76,14,64,12],[76,15,64,13,"clipRect"],[76,23,64,21],[76,24,64,22,"clip"],[76,28,64,26],[76,29,64,27,"clipRect"],[76,37,64,35],[76,39,64,37,"op"],[76,41,64,39],[76,43,64,41],[76,47,64,45],[76,48,64,46],[77,6,65,4],[77,7,65,5],[77,13,65,11],[77,17,65,15],[77,28,65,26],[77,32,65,30,"clip"],[77,36,65,34],[77,38,65,36],[78,8,66,6,"canvas"],[78,14,66,12],[78,15,66,13,"clipRRect"],[78,24,66,22],[78,25,66,23,"clip"],[78,29,66,27],[78,30,66,28,"clipRRect"],[78,39,66,37],[78,41,66,39,"op"],[78,43,66,41],[78,45,66,43],[78,49,66,47],[78,50,66,48],[79,6,67,4],[79,7,67,5],[79,13,67,11],[80,8,68,6,"canvas"],[80,14,68,12],[80,15,68,13,"clipPath"],[80,23,68,21],[80,24,68,22,"clip"],[80,28,68,26],[80,29,68,27,"clipPath"],[80,37,68,35],[80,39,68,37,"op"],[80,41,68,39],[80,43,68,41],[80,47,68,45],[80,48,68,46],[81,6,69,4],[82,4,70,2],[83,2,71,0],[83,3,71,1],[84,0,71,2],[84,3]],"functionMap":{"names":["<global>","computeClip","saveCTM"],"mappings":"AAA;oBCE;CDmB;uBEC;CFgD"},"hasCjsExports":false},"type":"js/module"}]}