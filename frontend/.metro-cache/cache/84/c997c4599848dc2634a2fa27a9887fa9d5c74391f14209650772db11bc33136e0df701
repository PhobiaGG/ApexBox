{"dependencies":[{"name":"../utils/telemetry","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":71,"index":71}}],"key":"FOE1isHRrftwB7qGE3+4jUl0o1o=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"default\", {\n    enumerable: true,\n    get: function () {\n      return _default;\n    }\n  });\n  var _utilsTelemetry = require(_dependencyMap[0], \"../utils/telemetry\");\n  class MockBleService {\n    status = {\n      isScanning: false,\n      isConnected: false,\n      connectedDevice: null\n    };\n    mockDevices = [{\n      id: '001',\n      name: 'ApexBox-001',\n      signal: 'excellent'\n    }, {\n      id: '002',\n      name: 'ApexBox-002',\n      signal: 'fair'\n    }];\n    telemetrySimulator = new _utilsTelemetry.TelemetrySimulator();\n    telemetryInterval = null;\n    telemetryCallbacks = new Set();\n    async scan() {\n      console.log('[BLE] Scanning for devices...');\n      this.status.isScanning = true;\n      return new Promise(resolve => {\n        setTimeout(() => {\n          this.status.isScanning = false;\n          console.log('[BLE] Found devices:', this.mockDevices);\n          resolve(this.mockDevices);\n        }, 1500);\n      });\n    }\n    async connect(device) {\n      console.log('[BLE] Connecting to:', device.name);\n      return new Promise(resolve => {\n        setTimeout(() => {\n          this.status.isConnected = true;\n          this.status.connectedDevice = device;\n          console.log('[BLE] Connected to:', device.name);\n\n          // Start telemetry streaming\n          this.startTelemetryStream();\n          resolve(true);\n        }, 1000);\n      });\n    }\n    async disconnect() {\n      console.log('[BLE] Disconnecting...');\n      return new Promise(resolve => {\n        setTimeout(() => {\n          // Stop telemetry streaming\n          this.stopTelemetryStream();\n          this.status.isConnected = false;\n          this.status.connectedDevice = null;\n          console.log('[BLE] Disconnected');\n          resolve();\n        }, 500);\n      });\n    }\n    async sendCommand(command) {\n      if (!this.status.isConnected) {\n        throw new Error('Not connected to any device');\n      }\n      console.log('[BLE] Sending command:', command);\n      return new Promise(resolve => {\n        setTimeout(() => {\n          console.log('[BLE] Command sent successfully:', command);\n          resolve();\n        }, 500);\n      });\n    }\n    getStatus() {\n      return Object.assign({}, this.status);\n    }\n\n    /**\n     * Subscribe to telemetry updates\n     */\n    onTelemetry(callback) {\n      this.telemetryCallbacks.add(callback);\n      console.log('[BLE] Telemetry subscriber added. Total:', this.telemetryCallbacks.size);\n\n      // Return unsubscribe function\n      return () => {\n        this.telemetryCallbacks.delete(callback);\n        console.log('[BLE] Telemetry subscriber removed. Total:', this.telemetryCallbacks.size);\n      };\n    }\n\n    /**\n     * Start streaming telemetry data (20Hz = 50ms interval)\n     */\n    startTelemetryStream() {\n      if (this.telemetryInterval) {\n        return; // Already streaming\n      }\n      console.log('[BLE] Starting telemetry stream at 20Hz');\n      this.telemetrySimulator.reset();\n      this.telemetryInterval = setInterval(() => {\n        if (!this.status.isConnected) {\n          this.stopTelemetryStream();\n          return;\n        }\n        const data = this.telemetrySimulator.generateSample();\n\n        // Broadcast to all subscribers\n        this.telemetryCallbacks.forEach(callback => {\n          try {\n            callback(data);\n          } catch (error) {\n            console.error('[BLE] Error in telemetry callback:', error);\n          }\n        });\n      }, 50); // 20Hz update rate\n    }\n\n    /**\n     * Stop telemetry streaming\n     */\n    stopTelemetryStream() {\n      if (this.telemetryInterval) {\n        clearInterval(this.telemetryInterval);\n        this.telemetryInterval = null;\n        console.log('[BLE] Telemetry stream stopped');\n      }\n    }\n  }\n  var _default = new MockBleService();\n});","lineCount":139,"map":[[7,2,154,0,"Object"],[7,8,154,0],[7,9,154,0,"defineProperty"],[7,23,154,0],[7,24,154,0,"exports"],[7,31,154,0],[8,4,154,0,"enumerable"],[8,14,154,0],[9,4,154,0,"get"],[9,7,154,0],[9,18,154,0,"get"],[9,19,154,0],[10,6,154,0],[10,13,154,0,"_default"],[10,21,154,0],[11,4,154,0],[12,2,154,0],[13,2,1,0],[13,6,1,0,"_utilsTelemetry"],[13,21,1,0],[13,24,1,0,"require"],[13,31,1,0],[13,32,1,0,"_dependencyMap"],[13,46,1,0],[14,2,17,0],[14,8,17,6,"MockBleService"],[14,22,17,20],[14,23,17,21],[15,4,18,10,"status"],[15,10,18,16],[15,13,18,30],[16,6,19,4,"isScanning"],[16,16,19,14],[16,18,19,16],[16,23,19,21],[17,6,20,4,"isConnected"],[17,17,20,15],[17,19,20,17],[17,24,20,22],[18,6,21,4,"connectedDevice"],[18,21,21,19],[18,23,21,21],[19,4,22,2],[19,5,22,3],[20,4,24,10,"mockDevices"],[20,15,24,21],[20,18,24,37],[20,19,25,4],[21,6,25,6,"id"],[21,8,25,8],[21,10,25,10],[21,15,25,15],[22,6,25,17,"name"],[22,10,25,21],[22,12,25,23],[22,25,25,36],[23,6,25,38,"signal"],[23,12,25,44],[23,14,25,46],[24,4,25,58],[24,5,25,59],[24,7,26,4],[25,6,26,6,"id"],[25,8,26,8],[25,10,26,10],[25,15,26,15],[26,6,26,17,"name"],[26,10,26,21],[26,12,26,23],[26,25,26,36],[27,6,26,38,"signal"],[27,12,26,44],[27,14,26,46],[28,4,26,53],[28,5,26,54],[28,6,27,3],[29,4,29,10,"telemetrySimulator"],[29,22,29,28],[29,25,29,51],[29,29,29,55,"TelemetrySimulator"],[29,44,29,73],[29,45,29,73,"TelemetrySimulator"],[29,63,29,73],[29,64,29,74],[29,65,29,75],[30,4,30,10,"telemetryInterval"],[30,21,30,27],[30,24,30,53],[30,28,30,57],[31,4,31,10,"telemetryCallbacks"],[31,22,31,28],[31,25,31,55],[31,29,31,59,"Set"],[31,32,31,62],[31,33,31,63],[31,34,31,64],[32,4,33,2],[32,10,33,8,"scan"],[32,14,33,12,"scan"],[32,15,33,12],[32,17,33,37],[33,6,34,4,"console"],[33,13,34,11],[33,14,34,12,"log"],[33,17,34,15],[33,18,34,16],[33,49,34,47],[33,50,34,48],[34,6,35,4],[34,10,35,8],[34,11,35,9,"status"],[34,17,35,15],[34,18,35,16,"isScanning"],[34,28,35,26],[34,31,35,29],[34,35,35,33],[35,6,37,4],[35,13,37,11],[35,17,37,15,"Promise"],[35,24,37,22],[35,25,37,24,"resolve"],[35,32,37,31],[35,36,37,36],[36,8,38,6,"setTimeout"],[36,18,38,16],[36,19,38,17],[36,25,38,23],[37,10,39,8],[37,14,39,12],[37,15,39,13,"status"],[37,21,39,19],[37,22,39,20,"isScanning"],[37,32,39,30],[37,35,39,33],[37,40,39,38],[38,10,40,8,"console"],[38,17,40,15],[38,18,40,16,"log"],[38,21,40,19],[38,22,40,20],[38,44,40,42],[38,46,40,44],[38,50,40,48],[38,51,40,49,"mockDevices"],[38,62,40,60],[38,63,40,61],[39,10,41,8,"resolve"],[39,17,41,15],[39,18,41,16],[39,22,41,20],[39,23,41,21,"mockDevices"],[39,34,41,32],[39,35,41,33],[40,8,42,6],[40,9,42,7],[40,11,42,9],[40,15,42,13],[40,16,42,14],[41,6,43,4],[41,7,43,5],[41,8,43,6],[42,4,44,2],[43,4,46,2],[43,10,46,8,"connect"],[43,17,46,15,"connect"],[43,18,46,16,"device"],[43,24,46,33],[43,26,46,53],[44,6,47,4,"console"],[44,13,47,11],[44,14,47,12,"log"],[44,17,47,15],[44,18,47,16],[44,40,47,38],[44,42,47,40,"device"],[44,48,47,46],[44,49,47,47,"name"],[44,53,47,51],[44,54,47,52],[45,6,49,4],[45,13,49,11],[45,17,49,15,"Promise"],[45,24,49,22],[45,25,49,24,"resolve"],[45,32,49,31],[45,36,49,36],[46,8,50,6,"setTimeout"],[46,18,50,16],[46,19,50,17],[46,25,50,23],[47,10,51,8],[47,14,51,12],[47,15,51,13,"status"],[47,21,51,19],[47,22,51,20,"isConnected"],[47,33,51,31],[47,36,51,34],[47,40,51,38],[48,10,52,8],[48,14,52,12],[48,15,52,13,"status"],[48,21,52,19],[48,22,52,20,"connectedDevice"],[48,37,52,35],[48,40,52,38,"device"],[48,46,52,44],[49,10,53,8,"console"],[49,17,53,15],[49,18,53,16,"log"],[49,21,53,19],[49,22,53,20],[49,43,53,41],[49,45,53,43,"device"],[49,51,53,49],[49,52,53,50,"name"],[49,56,53,54],[49,57,53,55],[51,10,55,8],[52,10,56,8],[52,14,56,12],[52,15,56,13,"startTelemetryStream"],[52,35,56,33],[52,36,56,34],[52,37,56,35],[53,10,58,8,"resolve"],[53,17,58,15],[53,18,58,16],[53,22,58,20],[53,23,58,21],[54,8,59,6],[54,9,59,7],[54,11,59,9],[54,15,59,13],[54,16,59,14],[55,6,60,4],[55,7,60,5],[55,8,60,6],[56,4,61,2],[57,4,63,2],[57,10,63,8,"disconnect"],[57,20,63,18,"disconnect"],[57,21,63,18],[57,23,63,36],[58,6,64,4,"console"],[58,13,64,11],[58,14,64,12,"log"],[58,17,64,15],[58,18,64,16],[58,42,64,40],[58,43,64,41],[59,6,66,4],[59,13,66,11],[59,17,66,15,"Promise"],[59,24,66,22],[59,25,66,24,"resolve"],[59,32,66,31],[59,36,66,36],[60,8,67,6,"setTimeout"],[60,18,67,16],[60,19,67,17],[60,25,67,23],[61,10,68,8],[62,10,69,8],[62,14,69,12],[62,15,69,13,"stopTelemetryStream"],[62,34,69,32],[62,35,69,33],[62,36,69,34],[63,10,71,8],[63,14,71,12],[63,15,71,13,"status"],[63,21,71,19],[63,22,71,20,"isConnected"],[63,33,71,31],[63,36,71,34],[63,41,71,39],[64,10,72,8],[64,14,72,12],[64,15,72,13,"status"],[64,21,72,19],[64,22,72,20,"connectedDevice"],[64,37,72,35],[64,40,72,38],[64,44,72,42],[65,10,73,8,"console"],[65,17,73,15],[65,18,73,16,"log"],[65,21,73,19],[65,22,73,20],[65,42,73,40],[65,43,73,41],[66,10,74,8,"resolve"],[66,17,74,15],[66,18,74,16],[66,19,74,17],[67,8,75,6],[67,9,75,7],[67,11,75,9],[67,14,75,12],[67,15,75,13],[68,6,76,4],[68,7,76,5],[68,8,76,6],[69,4,77,2],[70,4,79,2],[70,10,79,8,"sendCommand"],[70,21,79,19,"sendCommand"],[70,22,79,20,"command"],[70,29,79,35],[70,31,79,52],[71,6,80,4],[71,10,80,8],[71,11,80,9],[71,15,80,13],[71,16,80,14,"status"],[71,22,80,20],[71,23,80,21,"isConnected"],[71,34,80,32],[71,36,80,34],[72,8,81,6],[72,14,81,12],[72,18,81,16,"Error"],[72,23,81,21],[72,24,81,22],[72,53,81,51],[72,54,81,52],[73,6,82,4],[74,6,84,4,"console"],[74,13,84,11],[74,14,84,12,"log"],[74,17,84,15],[74,18,84,16],[74,42,84,40],[74,44,84,42,"command"],[74,51,84,49],[74,52,84,50],[75,6,86,4],[75,13,86,11],[75,17,86,15,"Promise"],[75,24,86,22],[75,25,86,24,"resolve"],[75,32,86,31],[75,36,86,36],[76,8,87,6,"setTimeout"],[76,18,87,16],[76,19,87,17],[76,25,87,23],[77,10,88,8,"console"],[77,17,88,15],[77,18,88,16,"log"],[77,21,88,19],[77,22,88,20],[77,56,88,54],[77,58,88,56,"command"],[77,65,88,63],[77,66,88,64],[78,10,89,8,"resolve"],[78,17,89,15],[78,18,89,16],[78,19,89,17],[79,8,90,6],[79,9,90,7],[79,11,90,9],[79,14,90,12],[79,15,90,13],[80,6,91,4],[80,7,91,5],[80,8,91,6],[81,4,92,2],[82,4,94,2,"getStatus"],[82,13,94,11,"getStatus"],[82,14,94,11],[82,16,94,25],[83,6,95,4],[83,13,95,4,"Object"],[83,19,95,4],[83,20,95,4,"assign"],[83,26,95,4],[83,31,95,16],[83,35,95,20],[83,36,95,21,"status"],[83,42,95,27],[84,4,96,2],[86,4,98,2],[87,0,99,0],[88,0,100,0],[89,4,101,2,"onTelemetry"],[89,15,101,13,"onTelemetry"],[89,16,101,14,"callback"],[89,24,101,41],[89,26,101,55],[90,6,102,4],[90,10,102,8],[90,11,102,9,"telemetryCallbacks"],[90,29,102,27],[90,30,102,28,"add"],[90,33,102,31],[90,34,102,32,"callback"],[90,42,102,40],[90,43,102,41],[91,6,103,4,"console"],[91,13,103,11],[91,14,103,12,"log"],[91,17,103,15],[91,18,103,16],[91,60,103,58],[91,62,103,60],[91,66,103,64],[91,67,103,65,"telemetryCallbacks"],[91,85,103,83],[91,86,103,84,"size"],[91,90,103,88],[91,91,103,89],[93,6,105,4],[94,6,106,4],[94,13,106,11],[94,19,106,17],[95,8,107,6],[95,12,107,10],[95,13,107,11,"telemetryCallbacks"],[95,31,107,29],[95,32,107,30,"delete"],[95,38,107,36],[95,39,107,37,"callback"],[95,47,107,45],[95,48,107,46],[96,8,108,6,"console"],[96,15,108,13],[96,16,108,14,"log"],[96,19,108,17],[96,20,108,18],[96,64,108,62],[96,66,108,64],[96,70,108,68],[96,71,108,69,"telemetryCallbacks"],[96,89,108,87],[96,90,108,88,"size"],[96,94,108,92],[96,95,108,93],[97,6,109,4],[97,7,109,5],[98,4,110,2],[100,4,112,2],[101,0,113,0],[102,0,114,0],[103,4,115,10,"startTelemetryStream"],[103,24,115,30,"startTelemetryStream"],[103,25,115,30],[103,27,115,33],[104,6,116,4],[104,10,116,8],[104,14,116,12],[104,15,116,13,"telemetryInterval"],[104,32,116,30],[104,34,116,32],[105,8,117,6],[105,15,117,13],[105,16,117,14],[106,6,118,4],[107,6,120,4,"console"],[107,13,120,11],[107,14,120,12,"log"],[107,17,120,15],[107,18,120,16],[107,59,120,57],[107,60,120,58],[108,6,121,4],[108,10,121,8],[108,11,121,9,"telemetrySimulator"],[108,29,121,27],[108,30,121,28,"reset"],[108,35,121,33],[108,36,121,34],[108,37,121,35],[109,6,123,4],[109,10,123,8],[109,11,123,9,"telemetryInterval"],[109,28,123,26],[109,31,123,29,"setInterval"],[109,42,123,40],[109,43,123,41],[109,49,123,47],[110,8,124,6],[110,12,124,10],[110,13,124,11],[110,17,124,15],[110,18,124,16,"status"],[110,24,124,22],[110,25,124,23,"isConnected"],[110,36,124,34],[110,38,124,36],[111,10,125,8],[111,14,125,12],[111,15,125,13,"stopTelemetryStream"],[111,34,125,32],[111,35,125,33],[111,36,125,34],[112,10,126,8],[113,8,127,6],[114,8,129,6],[114,14,129,12,"data"],[114,18,129,16],[114,21,129,19],[114,25,129,23],[114,26,129,24,"telemetrySimulator"],[114,44,129,42],[114,45,129,43,"generateSample"],[114,59,129,57],[114,60,129,58],[114,61,129,59],[116,8,131,6],[117,8,132,6],[117,12,132,10],[117,13,132,11,"telemetryCallbacks"],[117,31,132,29],[117,32,132,30,"forEach"],[117,39,132,37],[117,40,132,38,"callback"],[117,48,132,46],[117,52,132,50],[118,10,133,8],[118,14,133,12],[119,12,134,10,"callback"],[119,20,134,18],[119,21,134,19,"data"],[119,25,134,23],[119,26,134,24],[120,10,135,8],[120,11,135,9],[120,12,135,10],[120,19,135,17,"error"],[120,24,135,22],[120,26,135,24],[121,12,136,10,"console"],[121,19,136,17],[121,20,136,18,"error"],[121,25,136,23],[121,26,136,24],[121,62,136,60],[121,64,136,62,"error"],[121,69,136,67],[121,70,136,68],[122,10,137,8],[123,8,138,6],[123,9,138,7],[123,10,138,8],[124,6,139,4],[124,7,139,5],[124,9,139,7],[124,11,139,9],[124,12,139,10],[124,13,139,11],[124,14,139,12],[125,4,140,2],[127,4,142,2],[128,0,143,0],[129,0,144,0],[130,4,145,10,"stopTelemetryStream"],[130,23,145,29,"stopTelemetryStream"],[130,24,145,29],[130,26,145,32],[131,6,146,4],[131,10,146,8],[131,14,146,12],[131,15,146,13,"telemetryInterval"],[131,32,146,30],[131,34,146,32],[132,8,147,6,"clearInterval"],[132,21,147,19],[132,22,147,20],[132,26,147,24],[132,27,147,25,"telemetryInterval"],[132,44,147,42],[132,45,147,43],[133,8,148,6],[133,12,148,10],[133,13,148,11,"telemetryInterval"],[133,30,148,28],[133,33,148,31],[133,37,148,35],[134,8,149,6,"console"],[134,15,149,13],[134,16,149,14,"log"],[134,19,149,17],[134,20,149,18],[134,52,149,50],[134,53,149,51],[135,6,150,4],[136,4,151,2],[137,2,152,0],[138,2,154,0],[138,6,154,0,"_default"],[138,14,154,0],[138,17,154,15],[138,21,154,19,"MockBleService"],[138,35,154,33],[138,36,154,34],[138,37,154,35],[139,0,154,36],[139,3]],"functionMap":{"names":["<global>","MockBleService","scan","Promise$argument_0","setTimeout$argument_0","connect","disconnect","sendCommand","getStatus","onTelemetry","<anonymous>","startTelemetryStream","setInterval$argument_0","telemetryCallbacks.forEach$argument_0","stopTelemetryStream"],"mappings":"AAA;ACgB;ECgB;uBCI;iBCC;ODI;KDC;GDC;EIE;uBFG;iBCC;ODS;KEC;GJC;EKE;uBHG;iBCC;ODQ;KGC;GLC;EME;uBJO;iBCC;ODG;KIC;GNC;EOE;GPE;EQK;WCK;KDG;GRC;EUK;yCCQ;sCCS;ODM;KDC;GVC;EaK;GbM;CDC"},"hasCjsExports":false},"type":"js/module"}]}