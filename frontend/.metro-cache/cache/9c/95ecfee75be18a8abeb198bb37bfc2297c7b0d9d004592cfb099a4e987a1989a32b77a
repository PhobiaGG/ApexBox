{"dependencies":[{"name":"../../skia/core/AnimatedImage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":65,"index":65}}],"key":"LhU/Px6ZGN7Mh77TF9+qamLywNY=","exportNames":["*"],"imports":1}},{"name":"./ReanimatedProxy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":66},"end":{"line":2,"column":36,"index":102}}],"key":"9/hMKtQD5ZrdSt9i8tblq1v6X3Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAnimatedImageValue\", {\n    enumerable: true,\n    get: function () {\n      return useAnimatedImageValue;\n    }\n  });\n  var _skiaCoreAnimatedImage = require(_dependencyMap[0], \"../../skia/core/AnimatedImage\");\n  var _ReanimatedProxy = require(_dependencyMap[1], \"./ReanimatedProxy\");\n  var Rea = _interopDefault(_ReanimatedProxy);\n  const DEFAULT_FRAME_DURATION = 60;\n  const useAnimatedImageValue = (source, paused) => {\n    const defaultPaused = Rea.default.useSharedValue(false);\n    const isPaused = paused !== null && paused !== void 0 ? paused : defaultPaused;\n    const currentFrame = Rea.default.useSharedValue(null);\n    const lastTimestamp = Rea.default.useSharedValue(-1);\n    const animatedImage = (0, _skiaCoreAnimatedImage.useAnimatedImage)(source, err => {\n      console.error(err);\n      throw new Error(`Could not load animated image - got '${err.message}'`);\n    });\n    const frameDuration = (animatedImage === null || animatedImage === void 0 ? void 0 : animatedImage.currentFrameDuration()) || DEFAULT_FRAME_DURATION;\n    Rea.default.useFrameCallback(frameInfo => {\n      if (!animatedImage) {\n        currentFrame.value = null;\n        return;\n      }\n      if (isPaused.value && lastTimestamp.value !== -1) {\n        return;\n      }\n      const {\n        timestamp\n      } = frameInfo;\n      const elapsed = timestamp - lastTimestamp.value;\n\n      // Check if it's time to switch frames based on GIF frame duration\n      if (elapsed < frameDuration) {\n        return;\n      }\n\n      // Update the current frame\n      animatedImage.decodeNextFrame();\n      const oldFrame = currentFrame.value;\n      currentFrame.value = animatedImage.getCurrentFrame();\n      if (oldFrame) {\n        oldFrame.dispose();\n      }\n\n      // Update the last timestamp\n      lastTimestamp.value = timestamp;\n    });\n    return currentFrame;\n  };\n});","lineCount":63,"map":[[12,2,4,0,"Object"],[12,8,4,0],[12,9,4,0,"defineProperty"],[12,23,4,0],[12,24,4,0,"exports"],[12,31,4,0],[13,4,4,0,"enumerable"],[13,14,4,0],[14,4,4,0,"get"],[14,7,4,0],[14,18,4,0,"get"],[14,19,4,0],[15,6,4,0],[15,13,4,0,"useAnimatedImageValue"],[15,34,4,0],[16,4,4,0],[17,2,4,0],[18,2,1,0],[18,6,1,0,"_skiaCoreAnimatedImage"],[18,28,1,0],[18,31,1,0,"require"],[18,38,1,0],[18,39,1,0,"_dependencyMap"],[18,53,1,0],[19,2,2,0],[19,6,2,0,"_ReanimatedProxy"],[19,22,2,0],[19,25,2,0,"require"],[19,32,2,0],[19,33,2,0,"_dependencyMap"],[19,47,2,0],[20,2,2,0],[20,6,2,0,"Rea"],[20,9,2,0],[20,12,2,0,"_interopDefault"],[20,27,2,0],[20,28,2,0,"_ReanimatedProxy"],[20,44,2,0],[21,2,3,0],[21,8,3,6,"DEFAULT_FRAME_DURATION"],[21,30,3,28],[21,33,3,31],[21,35,3,33],[22,2,4,7],[22,8,4,13,"useAnimatedImageValue"],[22,29,4,34],[22,32,4,37,"useAnimatedImageValue"],[22,33,4,38,"source"],[22,39,4,44],[22,41,4,46,"paused"],[22,47,4,52],[22,52,4,57],[23,4,5,2],[23,10,5,8,"defaultPaused"],[23,23,5,21],[23,26,5,24,"Rea"],[23,29,5,27],[23,30,5,27,"default"],[23,37,5,27],[23,38,5,28,"useSharedValue"],[23,52,5,42],[23,53,5,43],[23,58,5,48],[23,59,5,49],[24,4,6,2],[24,10,6,8,"isPaused"],[24,18,6,16],[24,21,6,19,"paused"],[24,27,6,25],[24,32,6,30],[24,36,6,34],[24,40,6,38,"paused"],[24,46,6,44],[24,51,6,49],[24,56,6,54],[24,57,6,55],[24,60,6,58,"paused"],[24,66,6,64],[24,69,6,67,"defaultPaused"],[24,82,6,80],[25,4,7,2],[25,10,7,8,"currentFrame"],[25,22,7,20],[25,25,7,23,"Rea"],[25,28,7,26],[25,29,7,26,"default"],[25,36,7,26],[25,37,7,27,"useSharedValue"],[25,51,7,41],[25,52,7,42],[25,56,7,46],[25,57,7,47],[26,4,8,2],[26,10,8,8,"lastTimestamp"],[26,23,8,21],[26,26,8,24,"Rea"],[26,29,8,27],[26,30,8,27,"default"],[26,37,8,27],[26,38,8,28,"useSharedValue"],[26,52,8,42],[26,53,8,43],[26,54,8,44],[26,55,8,45],[26,56,8,46],[27,4,9,2],[27,10,9,8,"animatedImage"],[27,23,9,21],[27,26,9,24],[27,30,9,24,"useAnimatedImage"],[27,52,9,40],[27,53,9,40,"useAnimatedImage"],[27,69,9,40],[27,71,9,41,"source"],[27,77,9,47],[27,79,9,49,"err"],[27,82,9,52],[27,86,9,56],[28,6,10,4,"console"],[28,13,10,11],[28,14,10,12,"error"],[28,19,10,17],[28,20,10,18,"err"],[28,23,10,21],[28,24,10,22],[29,6,11,4],[29,12,11,10],[29,16,11,14,"Error"],[29,21,11,19],[29,22,11,20],[29,62,11,60,"err"],[29,65,11,63],[29,66,11,64,"message"],[29,73,11,71],[29,76,11,74],[29,77,11,75],[30,4,12,2],[30,5,12,3],[30,6,12,4],[31,4,13,2],[31,10,13,8,"frameDuration"],[31,23,13,21],[31,26,13,24],[31,27,13,25,"animatedImage"],[31,40,13,38],[31,45,13,43],[31,49,13,47],[31,53,13,51,"animatedImage"],[31,66,13,64],[31,71,13,69],[31,76,13,74],[31,77,13,75],[31,80,13,78],[31,85,13,83],[31,86,13,84],[31,89,13,87,"animatedImage"],[31,102,13,100],[31,103,13,101,"currentFrameDuration"],[31,123,13,121],[31,124,13,122],[31,125,13,123],[31,130,13,128,"DEFAULT_FRAME_DURATION"],[31,152,13,150],[32,4,14,2,"Rea"],[32,7,14,5],[32,8,14,5,"default"],[32,15,14,5],[32,16,14,6,"useFrameCallback"],[32,32,14,22],[32,33,14,23,"frameInfo"],[32,42,14,32],[32,46,14,36],[33,6,15,4],[33,10,15,8],[33,11,15,9,"animatedImage"],[33,24,15,22],[33,26,15,24],[34,8,16,6,"currentFrame"],[34,20,16,18],[34,21,16,19,"value"],[34,26,16,24],[34,29,16,27],[34,33,16,31],[35,8,17,6],[36,6,18,4],[37,6,19,4],[37,10,19,8,"isPaused"],[37,18,19,16],[37,19,19,17,"value"],[37,24,19,22],[37,28,19,26,"lastTimestamp"],[37,41,19,39],[37,42,19,40,"value"],[37,47,19,45],[37,52,19,50],[37,53,19,51],[37,54,19,52],[37,56,19,54],[38,8,20,6],[39,6,21,4],[40,6,22,4],[40,12,22,10],[41,8,23,6,"timestamp"],[42,6,24,4],[42,7,24,5],[42,10,24,8,"frameInfo"],[42,19,24,17],[43,6,25,4],[43,12,25,10,"elapsed"],[43,19,25,17],[43,22,25,20,"timestamp"],[43,31,25,29],[43,34,25,32,"lastTimestamp"],[43,47,25,45],[43,48,25,46,"value"],[43,53,25,51],[45,6,27,4],[46,6,28,4],[46,10,28,8,"elapsed"],[46,17,28,15],[46,20,28,18,"frameDuration"],[46,33,28,31],[46,35,28,33],[47,8,29,6],[48,6,30,4],[50,6,32,4],[51,6,33,4,"animatedImage"],[51,19,33,17],[51,20,33,18,"decodeNextFrame"],[51,35,33,33],[51,36,33,34],[51,37,33,35],[52,6,34,4],[52,12,34,10,"oldFrame"],[52,20,34,18],[52,23,34,21,"currentFrame"],[52,35,34,33],[52,36,34,34,"value"],[52,41,34,39],[53,6,35,4,"currentFrame"],[53,18,35,16],[53,19,35,17,"value"],[53,24,35,22],[53,27,35,25,"animatedImage"],[53,40,35,38],[53,41,35,39,"getCurrentFrame"],[53,56,35,54],[53,57,35,55],[53,58,35,56],[54,6,36,4],[54,10,36,8,"oldFrame"],[54,18,36,16],[54,20,36,18],[55,8,37,6,"oldFrame"],[55,16,37,14],[55,17,37,15,"dispose"],[55,24,37,22],[55,25,37,23],[55,26,37,24],[56,6,38,4],[58,6,40,4],[59,6,41,4,"lastTimestamp"],[59,19,41,17],[59,20,41,18,"value"],[59,25,41,23],[59,28,41,26,"timestamp"],[59,37,41,35],[60,4,42,2],[60,5,42,3],[60,6,42,4],[61,4,43,2],[61,11,43,9,"currentFrame"],[61,23,43,21],[62,2,44,0],[62,3,44,1],[63,0,44,2],[63,3]],"functionMap":{"names":["<global>","useAnimatedImageValue","useAnimatedImage$argument_1","Rea.useFrameCallback$argument_0"],"mappings":"AAA;qCCG;iDCK;GDG;uBEE;GF4B;CDE"},"hasCjsExports":false},"type":"js/module"}]}