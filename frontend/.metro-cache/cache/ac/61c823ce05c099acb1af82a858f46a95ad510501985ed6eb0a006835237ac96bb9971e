{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  Object.defineProperty(exports, \"createDrawingContext\", {\n    enumerable: true,\n    get: function () {\n      return createDrawingContext;\n    }\n  });\n  const createDrawingContext = (Skia, paintPool, canvas) => {\n    \"worklet\";\n\n    // State (formerly class fields)\n    const paints = [];\n    const colorFilters = [];\n    const shaders = [];\n    const imageFilters = [];\n    const pathEffects = [];\n    const paintDeclarations = [];\n    const opacities = [];\n    let nextPaintIndex = 1;\n\n    // Initialize first paint and opacity\n    paintPool[0] = Skia.Paint();\n    paints.push(paintPool[0]);\n    opacities.push(1);\n\n    // Methods (formerly class methods)\n    const savePaint = () => {\n      // Get next available paint from pool or create new one if needed\n      if (nextPaintIndex >= paintPool.length) {\n        paintPool.push(Skia.Paint());\n      }\n      const nextPaint = paintPool[nextPaintIndex];\n      nextPaint.assign(getCurrentPaint()); // Reuse allocation by copying properties\n      paints.push(nextPaint);\n      opacities.push(opacities[opacities.length - 1]);\n      nextPaintIndex++;\n    };\n    const getOpacity = () => {\n      return opacities[opacities.length - 1];\n    };\n    const setOpacity = newOpacity => {\n      opacities[opacities.length - 1] = Math.max(0, Math.min(1, newOpacity));\n    };\n    const saveBackdropFilter = () => {\n      let imageFilter = null;\n      const imgf = imageFilters.pop();\n      if (imgf) {\n        imageFilter = imgf;\n      } else {\n        const cf = colorFilters.pop();\n        if (cf) {\n          imageFilter = Skia.ImageFilter.MakeColorFilter(cf, null);\n        }\n      }\n      canvas.saveLayer(undefined, null, imageFilter);\n      canvas.restore();\n    };\n\n    // Equivalent to the `get paint()` getter in the original class\n    const getCurrentPaint = () => {\n      return paints[paints.length - 1];\n    };\n    const restorePaint = () => {\n      opacities.pop();\n      return paints.pop();\n    };\n    const materializePaint = () => {\n      // Color Filters\n      if (colorFilters.length > 0) {\n        getCurrentPaint().setColorFilter(colorFilters.reduceRight((inner, outer) => inner ? Skia.ColorFilter.MakeCompose(outer, inner) : outer));\n      }\n      // Shaders\n      if (shaders.length > 0) {\n        getCurrentPaint().setShader(shaders[shaders.length - 1]);\n      }\n      // Image Filters\n      if (imageFilters.length > 0) {\n        getCurrentPaint().setImageFilter(imageFilters.reduceRight((inner, outer) => inner ? Skia.ImageFilter.MakeCompose(outer, inner) : outer));\n      }\n\n      // Path Effects\n      if (pathEffects.length > 0) {\n        getCurrentPaint().setPathEffect(pathEffects.reduceRight((inner, outer) => inner ? Skia.PathEffect.MakeCompose(outer, inner) : outer));\n      }\n\n      // Clear arrays\n      colorFilters.length = 0;\n      shaders.length = 0;\n      imageFilters.length = 0;\n      pathEffects.length = 0;\n    };\n\n    // Return an object containing the Skia reference, the canvas, and the methods\n    return {\n      // Public fields\n      Skia,\n      canvas,\n      paints,\n      colorFilters,\n      shaders,\n      imageFilters,\n      pathEffects,\n      paintDeclarations,\n      paintPool,\n      // Public methods\n      savePaint,\n      saveBackdropFilter,\n      get paint() {\n        return paints[paints.length - 1];\n      },\n      // the \"getter\" for the current paint\n      restorePaint,\n      materializePaint,\n      getOpacity,\n      setOpacity\n    };\n  };\n});","lineCount":123,"map":[[7,2,1,0,"Object"],[7,8,1,0],[7,9,1,0,"defineProperty"],[7,23,1,0],[7,24,1,0,"exports"],[7,31,1,0],[8,4,1,0,"enumerable"],[8,14,1,0],[9,4,1,0,"get"],[9,7,1,0],[9,18,1,0,"get"],[9,19,1,0],[10,6,1,0],[10,13,1,0,"createDrawingContext"],[10,33,1,0],[11,4,1,0],[12,2,1,0],[13,2,1,7],[13,8,1,13,"createDrawingContext"],[13,28,1,33],[13,31,1,36,"createDrawingContext"],[13,32,1,37,"Skia"],[13,36,1,41],[13,38,1,43,"paintPool"],[13,47,1,52],[13,49,1,54,"canvas"],[13,55,1,60],[13,60,1,65],[14,4,2,2],[14,13,2,11],[16,4,4,2],[17,4,5,2],[17,10,5,8,"paints"],[17,16,5,14],[17,19,5,17],[17,21,5,19],[18,4,6,2],[18,10,6,8,"colorFilters"],[18,22,6,20],[18,25,6,23],[18,27,6,25],[19,4,7,2],[19,10,7,8,"shaders"],[19,17,7,15],[19,20,7,18],[19,22,7,20],[20,4,8,2],[20,10,8,8,"imageFilters"],[20,22,8,20],[20,25,8,23],[20,27,8,25],[21,4,9,2],[21,10,9,8,"pathEffects"],[21,21,9,19],[21,24,9,22],[21,26,9,24],[22,4,10,2],[22,10,10,8,"paintDeclarations"],[22,27,10,25],[22,30,10,28],[22,32,10,30],[23,4,11,2],[23,10,11,8,"opacities"],[23,19,11,17],[23,22,11,20],[23,24,11,22],[24,4,12,2],[24,8,12,6,"nextPaintIndex"],[24,22,12,20],[24,25,12,23],[24,26,12,24],[26,4,14,2],[27,4,15,2,"paintPool"],[27,13,15,11],[27,14,15,12],[27,15,15,13],[27,16,15,14],[27,19,15,17,"Skia"],[27,23,15,21],[27,24,15,22,"Paint"],[27,29,15,27],[27,30,15,28],[27,31,15,29],[28,4,16,2,"paints"],[28,10,16,8],[28,11,16,9,"push"],[28,15,16,13],[28,16,16,14,"paintPool"],[28,25,16,23],[28,26,16,24],[28,27,16,25],[28,28,16,26],[28,29,16,27],[29,4,17,2,"opacities"],[29,13,17,11],[29,14,17,12,"push"],[29,18,17,16],[29,19,17,17],[29,20,17,18],[29,21,17,19],[31,4,19,2],[32,4,20,2],[32,10,20,8,"savePaint"],[32,19,20,17],[32,22,20,20,"savePaint"],[32,23,20,20],[32,28,20,26],[33,6,21,4],[34,6,22,4],[34,10,22,8,"nextPaintIndex"],[34,24,22,22],[34,28,22,26,"paintPool"],[34,37,22,35],[34,38,22,36,"length"],[34,44,22,42],[34,46,22,44],[35,8,23,6,"paintPool"],[35,17,23,15],[35,18,23,16,"push"],[35,22,23,20],[35,23,23,21,"Skia"],[35,27,23,25],[35,28,23,26,"Paint"],[35,33,23,31],[35,34,23,32],[35,35,23,33],[35,36,23,34],[36,6,24,4],[37,6,25,4],[37,12,25,10,"nextPaint"],[37,21,25,19],[37,24,25,22,"paintPool"],[37,33,25,31],[37,34,25,32,"nextPaintIndex"],[37,48,25,46],[37,49,25,47],[38,6,26,4,"nextPaint"],[38,15,26,13],[38,16,26,14,"assign"],[38,22,26,20],[38,23,26,21,"getCurrentPaint"],[38,38,26,36],[38,39,26,37],[38,40,26,38],[38,41,26,39],[38,42,26,40],[38,43,26,41],[39,6,27,4,"paints"],[39,12,27,10],[39,13,27,11,"push"],[39,17,27,15],[39,18,27,16,"nextPaint"],[39,27,27,25],[39,28,27,26],[40,6,28,4,"opacities"],[40,15,28,13],[40,16,28,14,"push"],[40,20,28,18],[40,21,28,19,"opacities"],[40,30,28,28],[40,31,28,29,"opacities"],[40,40,28,38],[40,41,28,39,"length"],[40,47,28,45],[40,50,28,48],[40,51,28,49],[40,52,28,50],[40,53,28,51],[41,6,29,4,"nextPaintIndex"],[41,20,29,18],[41,22,29,20],[42,4,30,2],[42,5,30,3],[43,4,31,2],[43,10,31,8,"getOpacity"],[43,20,31,18],[43,23,31,21,"getOpacity"],[43,24,31,21],[43,29,31,27],[44,6,32,4],[44,13,32,11,"opacities"],[44,22,32,20],[44,23,32,21,"opacities"],[44,32,32,30],[44,33,32,31,"length"],[44,39,32,37],[44,42,32,40],[44,43,32,41],[44,44,32,42],[45,4,33,2],[45,5,33,3],[46,4,34,2],[46,10,34,8,"setOpacity"],[46,20,34,18],[46,23,34,21,"newOpacity"],[46,33,34,31],[46,37,34,35],[47,6,35,4,"opacities"],[47,15,35,13],[47,16,35,14,"opacities"],[47,25,35,23],[47,26,35,24,"length"],[47,32,35,30],[47,35,35,33],[47,36,35,34],[47,37,35,35],[47,40,35,38,"Math"],[47,44,35,42],[47,45,35,43,"max"],[47,48,35,46],[47,49,35,47],[47,50,35,48],[47,52,35,50,"Math"],[47,56,35,54],[47,57,35,55,"min"],[47,60,35,58],[47,61,35,59],[47,62,35,60],[47,64,35,62,"newOpacity"],[47,74,35,72],[47,75,35,73],[47,76,35,74],[48,4,36,2],[48,5,36,3],[49,4,37,2],[49,10,37,8,"saveBackdropFilter"],[49,28,37,26],[49,31,37,29,"saveBackdropFilter"],[49,32,37,29],[49,37,37,35],[50,6,38,4],[50,10,38,8,"imageFilter"],[50,21,38,19],[50,24,38,22],[50,28,38,26],[51,6,39,4],[51,12,39,10,"imgf"],[51,16,39,14],[51,19,39,17,"imageFilters"],[51,31,39,29],[51,32,39,30,"pop"],[51,35,39,33],[51,36,39,34],[51,37,39,35],[52,6,40,4],[52,10,40,8,"imgf"],[52,14,40,12],[52,16,40,14],[53,8,41,6,"imageFilter"],[53,19,41,17],[53,22,41,20,"imgf"],[53,26,41,24],[54,6,42,4],[54,7,42,5],[54,13,42,11],[55,8,43,6],[55,14,43,12,"cf"],[55,16,43,14],[55,19,43,17,"colorFilters"],[55,31,43,29],[55,32,43,30,"pop"],[55,35,43,33],[55,36,43,34],[55,37,43,35],[56,8,44,6],[56,12,44,10,"cf"],[56,14,44,12],[56,16,44,14],[57,10,45,8,"imageFilter"],[57,21,45,19],[57,24,45,22,"Skia"],[57,28,45,26],[57,29,45,27,"ImageFilter"],[57,40,45,38],[57,41,45,39,"MakeColorFilter"],[57,56,45,54],[57,57,45,55,"cf"],[57,59,45,57],[57,61,45,59],[57,65,45,63],[57,66,45,64],[58,8,46,6],[59,6,47,4],[60,6,48,4,"canvas"],[60,12,48,10],[60,13,48,11,"saveLayer"],[60,22,48,20],[60,23,48,21,"undefined"],[60,32,48,30],[60,34,48,32],[60,38,48,36],[60,40,48,38,"imageFilter"],[60,51,48,49],[60,52,48,50],[61,6,49,4,"canvas"],[61,12,49,10],[61,13,49,11,"restore"],[61,20,49,18],[61,21,49,19],[61,22,49,20],[62,4,50,2],[62,5,50,3],[64,4,52,2],[65,4,53,2],[65,10,53,8,"getCurrentPaint"],[65,25,53,23],[65,28,53,26,"getCurrentPaint"],[65,29,53,26],[65,34,53,32],[66,6,54,4],[66,13,54,11,"paints"],[66,19,54,17],[66,20,54,18,"paints"],[66,26,54,24],[66,27,54,25,"length"],[66,33,54,31],[66,36,54,34],[66,37,54,35],[66,38,54,36],[67,4,55,2],[67,5,55,3],[68,4,56,2],[68,10,56,8,"restorePaint"],[68,22,56,20],[68,25,56,23,"restorePaint"],[68,26,56,23],[68,31,56,29],[69,6,57,4,"opacities"],[69,15,57,13],[69,16,57,14,"pop"],[69,19,57,17],[69,20,57,18],[69,21,57,19],[70,6,58,4],[70,13,58,11,"paints"],[70,19,58,17],[70,20,58,18,"pop"],[70,23,58,21],[70,24,58,22],[70,25,58,23],[71,4,59,2],[71,5,59,3],[72,4,60,2],[72,10,60,8,"materializePaint"],[72,26,60,24],[72,29,60,27,"materializePaint"],[72,30,60,27],[72,35,60,33],[73,6,61,4],[74,6,62,4],[74,10,62,8,"colorFilters"],[74,22,62,20],[74,23,62,21,"length"],[74,29,62,27],[74,32,62,30],[74,33,62,31],[74,35,62,33],[75,8,63,6,"getCurrentPaint"],[75,23,63,21],[75,24,63,22],[75,25,63,23],[75,26,63,24,"setColorFilter"],[75,40,63,38],[75,41,63,39,"colorFilters"],[75,53,63,51],[75,54,63,52,"reduceRight"],[75,65,63,63],[75,66,63,64],[75,67,63,65,"inner"],[75,72,63,70],[75,74,63,72,"outer"],[75,79,63,77],[75,84,63,82,"inner"],[75,89,63,87],[75,92,63,90,"Skia"],[75,96,63,94],[75,97,63,95,"ColorFilter"],[75,108,63,106],[75,109,63,107,"MakeCompose"],[75,120,63,118],[75,121,63,119,"outer"],[75,126,63,124],[75,128,63,126,"inner"],[75,133,63,131],[75,134,63,132],[75,137,63,135,"outer"],[75,142,63,140],[75,143,63,141],[75,144,63,142],[76,6,64,4],[77,6,65,4],[78,6,66,4],[78,10,66,8,"shaders"],[78,17,66,15],[78,18,66,16,"length"],[78,24,66,22],[78,27,66,25],[78,28,66,26],[78,30,66,28],[79,8,67,6,"getCurrentPaint"],[79,23,67,21],[79,24,67,22],[79,25,67,23],[79,26,67,24,"setShader"],[79,35,67,33],[79,36,67,34,"shaders"],[79,43,67,41],[79,44,67,42,"shaders"],[79,51,67,49],[79,52,67,50,"length"],[79,58,67,56],[79,61,67,59],[79,62,67,60],[79,63,67,61],[79,64,67,62],[80,6,68,4],[81,6,69,4],[82,6,70,4],[82,10,70,8,"imageFilters"],[82,22,70,20],[82,23,70,21,"length"],[82,29,70,27],[82,32,70,30],[82,33,70,31],[82,35,70,33],[83,8,71,6,"getCurrentPaint"],[83,23,71,21],[83,24,71,22],[83,25,71,23],[83,26,71,24,"setImageFilter"],[83,40,71,38],[83,41,71,39,"imageFilters"],[83,53,71,51],[83,54,71,52,"reduceRight"],[83,65,71,63],[83,66,71,64],[83,67,71,65,"inner"],[83,72,71,70],[83,74,71,72,"outer"],[83,79,71,77],[83,84,71,82,"inner"],[83,89,71,87],[83,92,71,90,"Skia"],[83,96,71,94],[83,97,71,95,"ImageFilter"],[83,108,71,106],[83,109,71,107,"MakeCompose"],[83,120,71,118],[83,121,71,119,"outer"],[83,126,71,124],[83,128,71,126,"inner"],[83,133,71,131],[83,134,71,132],[83,137,71,135,"outer"],[83,142,71,140],[83,143,71,141],[83,144,71,142],[84,6,72,4],[86,6,74,4],[87,6,75,4],[87,10,75,8,"pathEffects"],[87,21,75,19],[87,22,75,20,"length"],[87,28,75,26],[87,31,75,29],[87,32,75,30],[87,34,75,32],[88,8,76,6,"getCurrentPaint"],[88,23,76,21],[88,24,76,22],[88,25,76,23],[88,26,76,24,"setPathEffect"],[88,39,76,37],[88,40,76,38,"pathEffects"],[88,51,76,49],[88,52,76,50,"reduceRight"],[88,63,76,61],[88,64,76,62],[88,65,76,63,"inner"],[88,70,76,68],[88,72,76,70,"outer"],[88,77,76,75],[88,82,76,80,"inner"],[88,87,76,85],[88,90,76,88,"Skia"],[88,94,76,92],[88,95,76,93,"PathEffect"],[88,105,76,103],[88,106,76,104,"MakeCompose"],[88,117,76,115],[88,118,76,116,"outer"],[88,123,76,121],[88,125,76,123,"inner"],[88,130,76,128],[88,131,76,129],[88,134,76,132,"outer"],[88,139,76,137],[88,140,76,138],[88,141,76,139],[89,6,77,4],[91,6,79,4],[92,6,80,4,"colorFilters"],[92,18,80,16],[92,19,80,17,"length"],[92,25,80,23],[92,28,80,26],[92,29,80,27],[93,6,81,4,"shaders"],[93,13,81,11],[93,14,81,12,"length"],[93,20,81,18],[93,23,81,21],[93,24,81,22],[94,6,82,4,"imageFilters"],[94,18,82,16],[94,19,82,17,"length"],[94,25,82,23],[94,28,82,26],[94,29,82,27],[95,6,83,4,"pathEffects"],[95,17,83,15],[95,18,83,16,"length"],[95,24,83,22],[95,27,83,25],[95,28,83,26],[96,4,84,2],[96,5,84,3],[98,4,86,2],[99,4,87,2],[99,11,87,9],[100,6,88,4],[101,6,89,4,"Skia"],[101,10,89,8],[102,6,90,4,"canvas"],[102,12,90,10],[103,6,91,4,"paints"],[103,12,91,10],[104,6,92,4,"colorFilters"],[104,18,92,16],[105,6,93,4,"shaders"],[105,13,93,11],[106,6,94,4,"imageFilters"],[106,18,94,16],[107,6,95,4,"pathEffects"],[107,17,95,15],[108,6,96,4,"paintDeclarations"],[108,23,96,21],[109,6,97,4,"paintPool"],[109,15,97,13],[110,6,98,4],[111,6,99,4,"savePaint"],[111,15,99,13],[112,6,100,4,"saveBackdropFilter"],[112,24,100,22],[113,6,101,4],[113,10,101,8,"paint"],[113,15,101,13,"paint"],[113,16,101,13],[113,18,101,16],[114,8,102,6],[114,15,102,13,"paints"],[114,21,102,19],[114,22,102,20,"paints"],[114,28,102,26],[114,29,102,27,"length"],[114,35,102,33],[114,38,102,36],[114,39,102,37],[114,40,102,38],[115,6,103,4],[115,7,103,5],[116,6,104,4],[117,6,105,4,"restorePaint"],[117,18,105,16],[118,6,106,4,"materializePaint"],[118,22,106,20],[119,6,107,4,"getOpacity"],[119,16,107,14],[120,6,108,4,"setOpacity"],[121,4,109,2],[121,5,109,3],[122,2,110,0],[122,3,110,1],[123,0,110,2],[123,3]],"functionMap":{"names":["<global>","createDrawingContext","savePaint","getOpacity","setOpacity","saveBackdropFilter","getCurrentPaint","restorePaint","materializePaint","colorFilters.reduceRight$argument_0","imageFilters.reduceRight$argument_0","pathEffects.reduceRight$argument_0","get__paint"],"mappings":"AAA,oCC;oBCmB;GDU;qBEC;GFE;qBGC;GHE;6BIC;GJa;0BKG;GLE;uBMC;GNG;2BOC;gECG,4ED;gEEQ,4EF;8DGK,2EH;GPQ;IWiB;KXE;CDO"},"hasCjsExports":false},"type":"js/module"}]}