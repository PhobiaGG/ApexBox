{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../../renderer/Offscreen","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":45},"end":{"line":2,"column":57,"index":102}}],"key":"KdT5Yxc0ye6AbkgBqacWSBftbgk=","exportNames":["*"],"imports":1}},{"name":"../../skia","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":103},"end":{"line":3,"column":44,"index":147}}],"key":"+q0qwmVtgReRJ1JJKJleyyIYxCs=","exportNames":["*"],"imports":1}},{"name":"../../Platform","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":148},"end":{"line":4,"column":42,"index":190}}],"key":"AXHAxFjlDdeq1JxYZnWn+aHYhYU=","exportNames":["*"],"imports":1}},{"name":"./ReanimatedProxy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":191},"end":{"line":5,"column":36,"index":227}}],"key":"9/hMKtQD5ZrdSt9i8tblq1v6X3Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useTexture\", {\n    enumerable: true,\n    get: function () {\n      return useTexture;\n    }\n  });\n  Object.defineProperty(exports, \"usePictureAsTexture\", {\n    enumerable: true,\n    get: function () {\n      return usePictureAsTexture;\n    }\n  });\n  Object.defineProperty(exports, \"useImageAsTexture\", {\n    enumerable: true,\n    get: function () {\n      return useImageAsTexture;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var _rendererOffscreen = require(_dependencyMap[1], \"../../renderer/Offscreen\");\n  var _skia = require(_dependencyMap[2], \"../../skia\");\n  var _Platform = require(_dependencyMap[3], \"../../Platform\");\n  var _ReanimatedProxy = require(_dependencyMap[4], \"./ReanimatedProxy\");\n  var Rea = _interopDefault(_ReanimatedProxy);\n  const createTextureFromImage = (texture, image) => {\n    \"worklet\";\n\n    const surface = _skia.Skia.Surface.MakeOffscreen(image.width(), image.height());\n    if (!surface) {\n      texture.value = null;\n      return;\n    }\n    const canvas = surface.getCanvas();\n    canvas.drawImage(image, 0, 0);\n    surface.flush();\n    texture.value = surface.makeImageSnapshot();\n    if (_Platform.Platform.OS === \"web\") {\n      texture.value = texture.value.makeNonTextureImage();\n    }\n  };\n  const createTexture = (texture, picture, size) => {\n    \"worklet\";\n\n    const surface = _skia.Skia.Surface.MakeOffscreen(size.width, size.height);\n    const canvas = surface.getCanvas();\n    canvas.drawPicture(picture);\n    surface.flush();\n    texture.value = surface.makeImageSnapshot();\n    if (_Platform.Platform.OS === \"web\") {\n      texture.value = texture.value.makeNonTextureImage();\n    }\n  };\n  const useTexture = (element, size, deps) => {\n    const {\n      width,\n      height\n    } = size;\n    const [picture, setPicture] = (0, _react.useState)(null);\n    (0, _react.useEffect)(() => {\n      (0, _rendererOffscreen.drawAsPicture)(element, {\n        x: 0,\n        y: 0,\n        width,\n        height\n      }).then(pic => {\n        setPicture(pic);\n      });\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, deps !== null && deps !== void 0 ? deps : []);\n    return usePictureAsTexture(picture, size);\n  };\n  const usePictureAsTexture = (picture, size) => {\n    const texture = Rea.default.useSharedValue(null);\n    (0, _react.useEffect)(() => {\n      if (picture !== null) {\n        Rea.default.runOnUI(createTexture)(texture, picture, size);\n      }\n    }, [picture, size, texture]);\n    return texture;\n  };\n  const useImageAsTexture = source => {\n    const image = (0, _skia.useImage)(source);\n    const texture = Rea.default.useSharedValue(null);\n    (0, _react.useEffect)(() => {\n      if (image !== null) {\n        Rea.default.runOnUI(createTextureFromImage)(texture, image);\n      }\n    }, [image, texture]);\n    return texture;\n  };\n});","lineCount":102,"map":[[12,2,34,0,"Object"],[12,8,34,0],[12,9,34,0,"defineProperty"],[12,23,34,0],[12,24,34,0,"exports"],[12,31,34,0],[13,4,34,0,"enumerable"],[13,14,34,0],[14,4,34,0,"get"],[14,7,34,0],[14,18,34,0,"get"],[14,19,34,0],[15,6,34,0],[15,13,34,0,"useTexture"],[15,23,34,0],[16,4,34,0],[17,2,34,0],[18,2,53,0,"Object"],[18,8,53,0],[18,9,53,0,"defineProperty"],[18,23,53,0],[18,24,53,0,"exports"],[18,31,53,0],[19,4,53,0,"enumerable"],[19,14,53,0],[20,4,53,0,"get"],[20,7,53,0],[20,18,53,0,"get"],[20,19,53,0],[21,6,53,0],[21,13,53,0,"usePictureAsTexture"],[21,32,53,0],[22,4,53,0],[23,2,53,0],[24,2,62,0,"Object"],[24,8,62,0],[24,9,62,0,"defineProperty"],[24,23,62,0],[24,24,62,0,"exports"],[24,31,62,0],[25,4,62,0,"enumerable"],[25,14,62,0],[26,4,62,0,"get"],[26,7,62,0],[26,18,62,0,"get"],[26,19,62,0],[27,6,62,0],[27,13,62,0,"useImageAsTexture"],[27,30,62,0],[28,4,62,0],[29,2,62,0],[30,2,1,0],[30,6,1,0,"_react"],[30,12,1,0],[30,15,1,0,"require"],[30,22,1,0],[30,23,1,0,"_dependencyMap"],[30,37,1,0],[31,2,2,0],[31,6,2,0,"_rendererOffscreen"],[31,24,2,0],[31,27,2,0,"require"],[31,34,2,0],[31,35,2,0,"_dependencyMap"],[31,49,2,0],[32,2,3,0],[32,6,3,0,"_skia"],[32,11,3,0],[32,14,3,0,"require"],[32,21,3,0],[32,22,3,0,"_dependencyMap"],[32,36,3,0],[33,2,4,0],[33,6,4,0,"_Platform"],[33,15,4,0],[33,18,4,0,"require"],[33,25,4,0],[33,26,4,0,"_dependencyMap"],[33,40,4,0],[34,2,5,0],[34,6,5,0,"_ReanimatedProxy"],[34,22,5,0],[34,25,5,0,"require"],[34,32,5,0],[34,33,5,0,"_dependencyMap"],[34,47,5,0],[35,2,5,0],[35,6,5,0,"Rea"],[35,9,5,0],[35,12,5,0,"_interopDefault"],[35,27,5,0],[35,28,5,0,"_ReanimatedProxy"],[35,44,5,0],[36,2,6,0],[36,8,6,6,"createTextureFromImage"],[36,30,6,28],[36,33,6,31,"createTextureFromImage"],[36,34,6,32,"texture"],[36,41,6,39],[36,43,6,41,"image"],[36,48,6,46],[36,53,6,51],[37,4,7,2],[37,13,7,11],[39,4,9,2],[39,10,9,8,"surface"],[39,17,9,15],[39,20,9,18,"Skia"],[39,25,9,22],[39,26,9,22,"Skia"],[39,30,9,22],[39,31,9,23,"Surface"],[39,38,9,30],[39,39,9,31,"MakeOffscreen"],[39,52,9,44],[39,53,9,45,"image"],[39,58,9,50],[39,59,9,51,"width"],[39,64,9,56],[39,65,9,57],[39,66,9,58],[39,68,9,60,"image"],[39,73,9,65],[39,74,9,66,"height"],[39,80,9,72],[39,81,9,73],[39,82,9,74],[39,83,9,75],[40,4,10,2],[40,8,10,6],[40,9,10,7,"surface"],[40,16,10,14],[40,18,10,16],[41,6,11,4,"texture"],[41,13,11,11],[41,14,11,12,"value"],[41,19,11,17],[41,22,11,20],[41,26,11,24],[42,6,12,4],[43,4,13,2],[44,4,14,2],[44,10,14,8,"canvas"],[44,16,14,14],[44,19,14,17,"surface"],[44,26,14,24],[44,27,14,25,"getCanvas"],[44,36,14,34],[44,37,14,35],[44,38,14,36],[45,4,15,2,"canvas"],[45,10,15,8],[45,11,15,9,"drawImage"],[45,20,15,18],[45,21,15,19,"image"],[45,26,15,24],[45,28,15,26],[45,29,15,27],[45,31,15,29],[45,32,15,30],[45,33,15,31],[46,4,16,2,"surface"],[46,11,16,9],[46,12,16,10,"flush"],[46,17,16,15],[46,18,16,16],[46,19,16,17],[47,4,17,2,"texture"],[47,11,17,9],[47,12,17,10,"value"],[47,17,17,15],[47,20,17,18,"surface"],[47,27,17,25],[47,28,17,26,"makeImageSnapshot"],[47,45,17,43],[47,46,17,44],[47,47,17,45],[48,4,18,2],[48,8,18,6,"Platform"],[48,17,18,14],[48,18,18,14,"Platform"],[48,26,18,14],[48,27,18,15,"OS"],[48,29,18,17],[48,34,18,22],[48,39,18,27],[48,41,18,29],[49,6,19,4,"texture"],[49,13,19,11],[49,14,19,12,"value"],[49,19,19,17],[49,22,19,20,"texture"],[49,29,19,27],[49,30,19,28,"value"],[49,35,19,33],[49,36,19,34,"makeNonTextureImage"],[49,55,19,53],[49,56,19,54],[49,57,19,55],[50,4,20,2],[51,2,21,0],[51,3,21,1],[52,2,22,0],[52,8,22,6,"createTexture"],[52,21,22,19],[52,24,22,22,"createTexture"],[52,25,22,23,"texture"],[52,32,22,30],[52,34,22,32,"picture"],[52,41,22,39],[52,43,22,41,"size"],[52,47,22,45],[52,52,22,50],[53,4,23,2],[53,13,23,11],[55,4,25,2],[55,10,25,8,"surface"],[55,17,25,15],[55,20,25,18,"Skia"],[55,25,25,22],[55,26,25,22,"Skia"],[55,30,25,22],[55,31,25,23,"Surface"],[55,38,25,30],[55,39,25,31,"MakeOffscreen"],[55,52,25,44],[55,53,25,45,"size"],[55,57,25,49],[55,58,25,50,"width"],[55,63,25,55],[55,65,25,57,"size"],[55,69,25,61],[55,70,25,62,"height"],[55,76,25,68],[55,77,25,69],[56,4,26,2],[56,10,26,8,"canvas"],[56,16,26,14],[56,19,26,17,"surface"],[56,26,26,24],[56,27,26,25,"getCanvas"],[56,36,26,34],[56,37,26,35],[56,38,26,36],[57,4,27,2,"canvas"],[57,10,27,8],[57,11,27,9,"drawPicture"],[57,22,27,20],[57,23,27,21,"picture"],[57,30,27,28],[57,31,27,29],[58,4,28,2,"surface"],[58,11,28,9],[58,12,28,10,"flush"],[58,17,28,15],[58,18,28,16],[58,19,28,17],[59,4,29,2,"texture"],[59,11,29,9],[59,12,29,10,"value"],[59,17,29,15],[59,20,29,18,"surface"],[59,27,29,25],[59,28,29,26,"makeImageSnapshot"],[59,45,29,43],[59,46,29,44],[59,47,29,45],[60,4,30,2],[60,8,30,6,"Platform"],[60,17,30,14],[60,18,30,14,"Platform"],[60,26,30,14],[60,27,30,15,"OS"],[60,29,30,17],[60,34,30,22],[60,39,30,27],[60,41,30,29],[61,6,31,4,"texture"],[61,13,31,11],[61,14,31,12,"value"],[61,19,31,17],[61,22,31,20,"texture"],[61,29,31,27],[61,30,31,28,"value"],[61,35,31,33],[61,36,31,34,"makeNonTextureImage"],[61,55,31,53],[61,56,31,54],[61,57,31,55],[62,4,32,2],[63,2,33,0],[63,3,33,1],[64,2,34,7],[64,8,34,13,"useTexture"],[64,18,34,23],[64,21,34,26,"useTexture"],[64,22,34,27,"element"],[64,29,34,34],[64,31,34,36,"size"],[64,35,34,40],[64,37,34,42,"deps"],[64,41,34,46],[64,46,34,51],[65,4,35,2],[65,10,35,8],[66,6,36,4,"width"],[66,11,36,9],[67,6,37,4,"height"],[68,4,38,2],[68,5,38,3],[68,8,38,6,"size"],[68,12,38,10],[69,4,39,2],[69,10,39,8],[69,11,39,9,"picture"],[69,18,39,16],[69,20,39,18,"setPicture"],[69,30,39,28],[69,31,39,29],[69,34,39,32],[69,38,39,32,"useState"],[69,44,39,40],[69,45,39,40,"useState"],[69,53,39,40],[69,55,39,41],[69,59,39,45],[69,60,39,46],[70,4,40,2],[70,8,40,2,"useEffect"],[70,14,40,11],[70,15,40,11,"useEffect"],[70,24,40,11],[70,26,40,12],[70,32,40,18],[71,6,41,4],[71,10,41,4,"drawAsPicture"],[71,28,41,17],[71,29,41,17,"drawAsPicture"],[71,42,41,17],[71,44,41,18,"element"],[71,51,41,25],[71,53,41,27],[72,8,42,6,"x"],[72,9,42,7],[72,11,42,9],[72,12,42,10],[73,8,43,6,"y"],[73,9,43,7],[73,11,43,9],[73,12,43,10],[74,8,44,6,"width"],[74,13,44,11],[75,8,45,6,"height"],[76,6,46,4],[76,7,46,5],[76,8,46,6],[76,9,46,7,"then"],[76,13,46,11],[76,14,46,12,"pic"],[76,17,46,15],[76,21,46,19],[77,8,47,6,"setPicture"],[77,18,47,16],[77,19,47,17,"pic"],[77,22,47,20],[77,23,47,21],[78,6,48,4],[78,7,48,5],[78,8,48,6],[79,6,49,4],[80,4,50,2],[80,5,50,3],[80,7,50,5,"deps"],[80,11,50,9],[80,16,50,14],[80,20,50,18],[80,24,50,22,"deps"],[80,28,50,26],[80,33,50,31],[80,38,50,36],[80,39,50,37],[80,42,50,40,"deps"],[80,46,50,44],[80,49,50,47],[80,51,50,49],[80,52,50,50],[81,4,51,2],[81,11,51,9,"usePictureAsTexture"],[81,30,51,28],[81,31,51,29,"picture"],[81,38,51,36],[81,40,51,38,"size"],[81,44,51,42],[81,45,51,43],[82,2,52,0],[82,3,52,1],[83,2,53,7],[83,8,53,13,"usePictureAsTexture"],[83,27,53,32],[83,30,53,35,"usePictureAsTexture"],[83,31,53,36,"picture"],[83,38,53,43],[83,40,53,45,"size"],[83,44,53,49],[83,49,53,54],[84,4,54,2],[84,10,54,8,"texture"],[84,17,54,15],[84,20,54,18,"Rea"],[84,23,54,21],[84,24,54,21,"default"],[84,31,54,21],[84,32,54,22,"useSharedValue"],[84,46,54,36],[84,47,54,37],[84,51,54,41],[84,52,54,42],[85,4,55,2],[85,8,55,2,"useEffect"],[85,14,55,11],[85,15,55,11,"useEffect"],[85,24,55,11],[85,26,55,12],[85,32,55,18],[86,6,56,4],[86,10,56,8,"picture"],[86,17,56,15],[86,22,56,20],[86,26,56,24],[86,28,56,26],[87,8,57,6,"Rea"],[87,11,57,9],[87,12,57,9,"default"],[87,19,57,9],[87,20,57,10,"runOnUI"],[87,27,57,17],[87,28,57,18,"createTexture"],[87,41,57,31],[87,42,57,32],[87,43,57,33,"texture"],[87,50,57,40],[87,52,57,42,"picture"],[87,59,57,49],[87,61,57,51,"size"],[87,65,57,55],[87,66,57,56],[88,6,58,4],[89,4,59,2],[89,5,59,3],[89,7,59,5],[89,8,59,6,"picture"],[89,15,59,13],[89,17,59,15,"size"],[89,21,59,19],[89,23,59,21,"texture"],[89,30,59,28],[89,31,59,29],[89,32,59,30],[90,4,60,2],[90,11,60,9,"texture"],[90,18,60,16],[91,2,61,0],[91,3,61,1],[92,2,62,7],[92,8,62,13,"useImageAsTexture"],[92,25,62,30],[92,28,62,33,"source"],[92,34,62,39],[92,38,62,43],[93,4,63,2],[93,10,63,8,"image"],[93,15,63,13],[93,18,63,16],[93,22,63,16,"useImage"],[93,27,63,24],[93,28,63,24,"useImage"],[93,36,63,24],[93,38,63,25,"source"],[93,44,63,31],[93,45,63,32],[94,4,64,2],[94,10,64,8,"texture"],[94,17,64,15],[94,20,64,18,"Rea"],[94,23,64,21],[94,24,64,21,"default"],[94,31,64,21],[94,32,64,22,"useSharedValue"],[94,46,64,36],[94,47,64,37],[94,51,64,41],[94,52,64,42],[95,4,65,2],[95,8,65,2,"useEffect"],[95,14,65,11],[95,15,65,11,"useEffect"],[95,24,65,11],[95,26,65,12],[95,32,65,18],[96,6,66,4],[96,10,66,8,"image"],[96,15,66,13],[96,20,66,18],[96,24,66,22],[96,26,66,24],[97,8,67,6,"Rea"],[97,11,67,9],[97,12,67,9,"default"],[97,19,67,9],[97,20,67,10,"runOnUI"],[97,27,67,17],[97,28,67,18,"createTextureFromImage"],[97,50,67,40],[97,51,67,41],[97,52,67,42,"texture"],[97,59,67,49],[97,61,67,51,"image"],[97,66,67,56],[97,67,67,57],[98,6,68,4],[99,4,69,2],[99,5,69,3],[99,7,69,5],[99,8,69,6,"image"],[99,13,69,11],[99,15,69,13,"texture"],[99,22,69,20],[99,23,69,21],[99,24,69,22],[100,4,70,2],[100,11,70,9,"texture"],[100,18,70,16],[101,2,71,0],[101,3,71,1],[102,0,71,2],[102,3]],"functionMap":{"names":["<global>","createTextureFromImage","createTexture","useTexture","useEffect$argument_0","drawAsPicture.then$argument_0","usePictureAsTexture","useImageAsTexture"],"mappings":"AAA;+BCK;CDe;sBEC;CFW;0BGC;YCM;YCM;KDE;GDE;CHE;mCMC;YFE;GEI;CNE;iCOC;YHG;GGI;CPE"},"hasCjsExports":false},"type":"js/module"}]}