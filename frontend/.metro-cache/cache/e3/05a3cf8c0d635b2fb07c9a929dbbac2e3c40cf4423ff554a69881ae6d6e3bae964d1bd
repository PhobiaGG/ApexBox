{"dependencies":[{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":44,"index":44}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"../../renderer/Offscreen","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":259},"end":{"line":11,"column":57,"index":316}}],"key":"KdT5Yxc0ye6AbkgBqacWSBftbgk=","exportNames":["*"],"imports":1}},{"name":"../../skia","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":317},"end":{"line":12,"column":44,"index":361}}],"key":"+q0qwmVtgReRJ1JJKJleyyIYxCs=","exportNames":["*"],"imports":1}},{"name":"../../Platform","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":13,"column":0,"index":362},"end":{"line":13,"column":42,"index":404}}],"key":"AXHAxFjlDdeq1JxYZnWn+aHYhYU=","exportNames":["*"],"imports":1}},{"name":"./ReanimatedProxy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":15,"column":0,"index":406},"end":{"line":15,"column":36,"index":442}}],"key":"9/hMKtQD5ZrdSt9i8tblq1v6X3Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useTexture\", {\n    enumerable: true,\n    get: function () {\n      return useTexture;\n    }\n  });\n  Object.defineProperty(exports, \"usePictureAsTexture\", {\n    enumerable: true,\n    get: function () {\n      return usePictureAsTexture;\n    }\n  });\n  Object.defineProperty(exports, \"useImageAsTexture\", {\n    enumerable: true,\n    get: function () {\n      return useImageAsTexture;\n    }\n  });\n  var _babelRuntimeHelpersSlicedToArray = require(_dependencyMap[0], \"@babel/runtime/helpers/slicedToArray\");\n  var _slicedToArray = _interopDefault(_babelRuntimeHelpersSlicedToArray);\n  var _react = require(_dependencyMap[1], \"react\");\n  var _rendererOffscreen = require(_dependencyMap[2], \"../../renderer/Offscreen\");\n  var _skia = require(_dependencyMap[3], \"../../skia\");\n  var _Platform = require(_dependencyMap[4], \"../../Platform\");\n  var _ReanimatedProxy = require(_dependencyMap[5], \"./ReanimatedProxy\");\n  var Rea = _interopDefault(_ReanimatedProxy);\n  var createTextureFromImage = (texture, image) => {\n    \"worklet\";\n\n    var surface = _skia.Skia.Surface.MakeOffscreen(image.width(), image.height());\n    if (!surface) {\n      texture.value = null;\n      return;\n    }\n    var canvas = surface.getCanvas();\n    canvas.drawImage(image, 0, 0);\n    surface.flush();\n    texture.value = surface.makeImageSnapshot();\n    if (_Platform.Platform.OS === \"web\") {\n      texture.value = texture.value.makeNonTextureImage();\n    }\n  };\n  var createTexture = (texture, picture, size) => {\n    \"worklet\";\n\n    var surface = _skia.Skia.Surface.MakeOffscreen(size.width, size.height);\n    var canvas = surface.getCanvas();\n    canvas.drawPicture(picture);\n    surface.flush();\n    texture.value = surface.makeImageSnapshot();\n    if (_Platform.Platform.OS === \"web\") {\n      texture.value = texture.value.makeNonTextureImage();\n    }\n  };\n  var useTexture = (element, size, deps) => {\n    var width = size.width,\n      height = size.height;\n    var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray.default)(_useState, 2),\n      picture = _useState2[0],\n      setPicture = _useState2[1];\n    (0, _react.useEffect)(() => {\n      (0, _rendererOffscreen.drawAsPicture)(element, {\n        x: 0,\n        y: 0,\n        width,\n        height\n      }).then(pic => {\n        setPicture(pic);\n      });\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, deps ?? []);\n    return usePictureAsTexture(picture, size);\n  };\n  var usePictureAsTexture = (picture, size) => {\n    var texture = Rea.default.useSharedValue(null);\n    (0, _react.useEffect)(() => {\n      if (picture !== null) {\n        Rea.default.runOnUI(createTexture)(texture, picture, size);\n      }\n    }, [picture, size, texture]);\n    return texture;\n  };\n  var useImageAsTexture = source => {\n    var image = (0, _skia.useImage)(source);\n    var texture = Rea.default.useSharedValue(null);\n    (0, _react.useEffect)(() => {\n      if (image !== null) {\n        Rea.default.runOnUI(createTextureFromImage)(texture, image);\n      }\n    }, [image, texture]);\n    return texture;\n  };\n});","lineCount":105,"map":[[12,2,52,0,"Object"],[12,8,52,0],[12,9,52,0,"defineProperty"],[12,23,52,0],[12,24,52,0,"exports"],[12,31,52,0],[13,4,52,0,"enumerable"],[13,14,52,0],[14,4,52,0,"get"],[14,7,52,0],[14,18,52,0,"get"],[14,19,52,0],[15,6,52,0],[15,13,52,0,"useTexture"],[15,23,52,0],[16,4,52,0],[17,2,52,0],[18,2,73,0,"Object"],[18,8,73,0],[18,9,73,0,"defineProperty"],[18,23,73,0],[18,24,73,0,"exports"],[18,31,73,0],[19,4,73,0,"enumerable"],[19,14,73,0],[20,4,73,0,"get"],[20,7,73,0],[20,18,73,0,"get"],[20,19,73,0],[21,6,73,0],[21,13,73,0,"usePictureAsTexture"],[21,32,73,0],[22,4,73,0],[23,2,73,0],[24,2,86,0,"Object"],[24,8,86,0],[24,9,86,0,"defineProperty"],[24,23,86,0],[24,24,86,0,"exports"],[24,31,86,0],[25,4,86,0,"enumerable"],[25,14,86,0],[26,4,86,0,"get"],[26,7,86,0],[26,18,86,0,"get"],[26,19,86,0],[27,6,86,0],[27,13,86,0,"useImageAsTexture"],[27,30,86,0],[28,4,86,0],[29,2,86,0],[30,2,95,2],[30,6,95,2,"_babelRuntimeHelpersSlicedToArray"],[30,39,95,2],[30,42,95,2,"require"],[30,49,95,2],[30,50,95,2,"_dependencyMap"],[30,64,95,2],[31,2,95,2],[31,6,95,2,"_slicedToArray"],[31,20,95,2],[31,23,95,2,"_interopDefault"],[31,38,95,2],[31,39,95,2,"_babelRuntimeHelpersSlicedToArray"],[31,72,95,2],[32,2,1,0],[32,6,1,0,"_react"],[32,12,1,0],[32,15,1,0,"require"],[32,22,1,0],[32,23,1,0,"_dependencyMap"],[32,37,1,0],[33,2,11,0],[33,6,11,0,"_rendererOffscreen"],[33,24,11,0],[33,27,11,0,"require"],[33,34,11,0],[33,35,11,0,"_dependencyMap"],[33,49,11,0],[34,2,12,0],[34,6,12,0,"_skia"],[34,11,12,0],[34,14,12,0,"require"],[34,21,12,0],[34,22,12,0,"_dependencyMap"],[34,36,12,0],[35,2,13,0],[35,6,13,0,"_Platform"],[35,15,13,0],[35,18,13,0,"require"],[35,25,13,0],[35,26,13,0,"_dependencyMap"],[35,40,13,0],[36,2,15,0],[36,6,15,0,"_ReanimatedProxy"],[36,22,15,0],[36,25,15,0,"require"],[36,32,15,0],[36,33,15,0,"_dependencyMap"],[36,47,15,0],[37,2,15,0],[37,6,15,0,"Rea"],[37,9,15,0],[37,12,15,0,"_interopDefault"],[37,27,15,0],[37,28,15,0,"_ReanimatedProxy"],[37,44,15,0],[38,2,17,0],[38,6,17,6,"createTextureFromImage"],[38,28,17,28],[38,31,17,31,"createTextureFromImage"],[38,32,18,2,"texture"],[38,39,18,38],[38,41,19,2,"image"],[38,46,19,16],[38,51,20,5],[39,4,21,2],[39,13,21,11],[41,4,22,2],[41,8,22,8,"surface"],[41,15,22,15],[41,18,22,18,"Skia"],[41,23,22,22],[41,24,22,22,"Skia"],[41,28,22,22],[41,29,22,23,"Surface"],[41,36,22,30],[41,37,22,31,"MakeOffscreen"],[41,50,22,44],[41,51,22,45,"image"],[41,56,22,50],[41,57,22,51,"width"],[41,62,22,56],[41,63,22,57],[41,64,22,58],[41,66,22,60,"image"],[41,71,22,65],[41,72,22,66,"height"],[41,78,22,72],[41,79,22,73],[41,80,22,74],[41,81,22,75],[42,4,23,2],[42,8,23,6],[42,9,23,7,"surface"],[42,16,23,14],[42,18,23,16],[43,6,24,4,"texture"],[43,13,24,11],[43,14,24,12,"value"],[43,19,24,17],[43,22,24,20],[43,26,24,24],[44,6,25,4],[45,4,26,2],[46,4,27,2],[46,8,27,8,"canvas"],[46,14,27,14],[46,17,27,17,"surface"],[46,24,27,24],[46,25,27,25,"getCanvas"],[46,34,27,34],[46,35,27,35],[46,36,27,36],[47,4,28,2,"canvas"],[47,10,28,8],[47,11,28,9,"drawImage"],[47,20,28,18],[47,21,28,19,"image"],[47,26,28,24],[47,28,28,26],[47,29,28,27],[47,31,28,29],[47,32,28,30],[47,33,28,31],[48,4,29,2,"surface"],[48,11,29,9],[48,12,29,10,"flush"],[48,17,29,15],[48,18,29,16],[48,19,29,17],[49,4,30,2,"texture"],[49,11,30,9],[49,12,30,10,"value"],[49,17,30,15],[49,20,30,18,"surface"],[49,27,30,25],[49,28,30,26,"makeImageSnapshot"],[49,45,30,43],[49,46,30,44],[49,47,30,45],[50,4,31,2],[50,8,31,6,"Platform"],[50,17,31,14],[50,18,31,14,"Platform"],[50,26,31,14],[50,27,31,15,"OS"],[50,29,31,17],[50,34,31,22],[50,39,31,27],[50,41,31,29],[51,6,32,4,"texture"],[51,13,32,11],[51,14,32,12,"value"],[51,19,32,17],[51,22,32,20,"texture"],[51,29,32,27],[51,30,32,28,"value"],[51,35,32,33],[51,36,32,34,"makeNonTextureImage"],[51,55,32,53],[51,56,32,54],[51,57,32,55],[52,4,33,2],[53,2,34,0],[53,3,34,1],[54,2,36,0],[54,6,36,6,"createTexture"],[54,19,36,19],[54,22,36,22,"createTexture"],[54,23,37,2,"texture"],[54,30,37,38],[54,32,38,2,"picture"],[54,39,38,20],[54,41,39,2,"size"],[54,45,39,14],[54,50,40,5],[55,4,41,2],[55,13,41,11],[57,4,42,2],[57,8,42,8,"surface"],[57,15,42,15],[57,18,42,18,"Skia"],[57,23,42,22],[57,24,42,22,"Skia"],[57,28,42,22],[57,29,42,23,"Surface"],[57,36,42,30],[57,37,42,31,"MakeOffscreen"],[57,50,42,44],[57,51,42,45,"size"],[57,55,42,49],[57,56,42,50,"width"],[57,61,42,55],[57,63,42,57,"size"],[57,67,42,61],[57,68,42,62,"height"],[57,74,42,68],[57,75,42,70],[58,4,43,2],[58,8,43,8,"canvas"],[58,14,43,14],[58,17,43,17,"surface"],[58,24,43,24],[58,25,43,25,"getCanvas"],[58,34,43,34],[58,35,43,35],[58,36,43,36],[59,4,44,2,"canvas"],[59,10,44,8],[59,11,44,9,"drawPicture"],[59,22,44,20],[59,23,44,21,"picture"],[59,30,44,28],[59,31,44,29],[60,4,45,2,"surface"],[60,11,45,9],[60,12,45,10,"flush"],[60,17,45,15],[60,18,45,16],[60,19,45,17],[61,4,46,2,"texture"],[61,11,46,9],[61,12,46,10,"value"],[61,17,46,15],[61,20,46,18,"surface"],[61,27,46,25],[61,28,46,26,"makeImageSnapshot"],[61,45,46,43],[61,46,46,44],[61,47,46,45],[62,4,47,2],[62,8,47,6,"Platform"],[62,17,47,14],[62,18,47,14,"Platform"],[62,26,47,14],[62,27,47,15,"OS"],[62,29,47,17],[62,34,47,22],[62,39,47,27],[62,41,47,29],[63,6,48,4,"texture"],[63,13,48,11],[63,14,48,12,"value"],[63,19,48,17],[63,22,48,20,"texture"],[63,29,48,27],[63,30,48,28,"value"],[63,35,48,33],[63,36,48,34,"makeNonTextureImage"],[63,55,48,53],[63,56,48,54],[63,57,48,55],[64,4,49,2],[65,2,50,0],[65,3,50,1],[66,2,52,7],[66,6,52,13,"useTexture"],[66,16,52,23],[66,19,52,26,"useTexture"],[66,20,53,2,"element"],[66,27,53,23],[66,29,54,2,"size"],[66,33,54,14],[66,35,55,2,"deps"],[66,39,55,23],[66,44,56,5],[67,4,57,2],[67,8,57,10,"width"],[67,13,57,15],[67,16,57,28,"size"],[67,20,57,32],[67,21,57,10,"width"],[67,26,57,15],[68,6,57,17,"height"],[68,12,57,23],[68,15,57,28,"size"],[68,19,57,32],[68,20,57,17,"height"],[68,26,57,23],[69,4,58,2],[69,8,58,2,"_useState"],[69,17,58,2],[69,20,58,32],[69,24,58,32,"useState"],[69,30,58,40],[69,31,58,40,"useState"],[69,39,58,40],[69,41,58,59],[69,45,58,63],[69,46,58,64],[70,6,58,64,"_useState2"],[70,16,58,64],[70,23,58,64,"_slicedToArray"],[70,37,58,64],[70,38,58,64,"default"],[70,45,58,64],[70,47,58,64,"_useState"],[70,56,58,64],[71,6,58,9,"picture"],[71,13,58,16],[71,16,58,16,"_useState2"],[71,26,58,16],[72,6,58,18,"setPicture"],[72,16,58,28],[72,19,58,28,"_useState2"],[72,29,58,28],[73,4,59,2],[73,8,59,2,"useEffect"],[73,14,59,11],[73,15,59,11,"useEffect"],[73,24,59,11],[73,26,59,12],[73,32,59,18],[74,6,60,4],[74,10,60,4,"drawAsPicture"],[74,28,60,17],[74,29,60,17,"drawAsPicture"],[74,42,60,17],[74,44,60,18,"element"],[74,51,60,25],[74,53,60,27],[75,8,61,6,"x"],[75,9,61,7],[75,11,61,9],[75,12,61,10],[76,8,62,6,"y"],[76,9,62,7],[76,11,62,9],[76,12,62,10],[77,8,63,6,"width"],[77,13,63,11],[78,8,64,6,"height"],[79,6,65,4],[79,7,65,5],[79,8,65,6],[79,9,65,7,"then"],[79,13,65,11],[79,14,65,13,"pic"],[79,17,65,16],[79,21,65,21],[80,8,66,6,"setPicture"],[80,18,66,16],[80,19,66,17,"pic"],[80,22,66,20],[80,23,66,21],[81,6,67,4],[81,7,67,5],[81,8,67,6],[82,6,68,4],[83,4,69,2],[83,5,69,3],[83,7,69,5,"deps"],[83,11,69,9],[83,15,69,13],[83,17,69,15],[83,18,69,16],[84,4,70,2],[84,11,70,9,"usePictureAsTexture"],[84,30,70,28],[84,31,70,29,"picture"],[84,38,70,36],[84,40,70,38,"size"],[84,44,70,42],[84,45,70,43],[85,2,71,0],[85,3,71,1],[86,2,73,7],[86,6,73,13,"usePictureAsTexture"],[86,25,73,32],[86,28,73,35,"usePictureAsTexture"],[86,29,74,2,"picture"],[86,36,74,27],[86,38,75,2,"size"],[86,42,75,14],[86,47,76,5],[87,4,77,2],[87,8,77,8,"texture"],[87,15,77,15],[87,18,77,18,"Rea"],[87,21,77,21],[87,22,77,21,"default"],[87,29,77,21],[87,30,77,22,"useSharedValue"],[87,44,77,36],[87,45,77,53],[87,49,77,57],[87,50,77,58],[88,4,78,2],[88,8,78,2,"useEffect"],[88,14,78,11],[88,15,78,11,"useEffect"],[88,24,78,11],[88,26,78,12],[88,32,78,18],[89,6,79,4],[89,10,79,8,"picture"],[89,17,79,15],[89,22,79,20],[89,26,79,24],[89,28,79,26],[90,8,80,6,"Rea"],[90,11,80,9],[90,12,80,9,"default"],[90,19,80,9],[90,20,80,10,"runOnUI"],[90,27,80,17],[90,28,80,18,"createTexture"],[90,41,80,31],[90,42,80,32],[90,43,80,33,"texture"],[90,50,80,40],[90,52,80,42,"picture"],[90,59,80,49],[90,61,80,51,"size"],[90,65,80,55],[90,66,80,56],[91,6,81,4],[92,4,82,2],[92,5,82,3],[92,7,82,5],[92,8,82,6,"picture"],[92,15,82,13],[92,17,82,15,"size"],[92,21,82,19],[92,23,82,21,"texture"],[92,30,82,28],[92,31,82,29],[92,32,82,30],[93,4,83,2],[93,11,83,9,"texture"],[93,18,83,16],[94,2,84,0],[94,3,84,1],[95,2,86,7],[95,6,86,13,"useImageAsTexture"],[95,23,86,30],[95,26,86,34,"source"],[95,32,86,57],[95,36,86,62],[96,4,87,2],[96,8,87,8,"image"],[96,13,87,13],[96,16,87,16],[96,20,87,16,"useImage"],[96,25,87,24],[96,26,87,24,"useImage"],[96,34,87,24],[96,36,87,25,"source"],[96,42,87,31],[96,43,87,32],[97,4,88,2],[97,8,88,8,"texture"],[97,15,88,15],[97,18,88,18,"Rea"],[97,21,88,21],[97,22,88,21,"default"],[97,29,88,21],[97,30,88,22,"useSharedValue"],[97,44,88,36],[97,45,88,53],[97,49,88,57],[97,50,88,58],[98,4,89,2],[98,8,89,2,"useEffect"],[98,14,89,11],[98,15,89,11,"useEffect"],[98,24,89,11],[98,26,89,12],[98,32,89,18],[99,6,90,4],[99,10,90,8,"image"],[99,15,90,13],[99,20,90,18],[99,24,90,22],[99,26,90,24],[100,8,91,6,"Rea"],[100,11,91,9],[100,12,91,9,"default"],[100,19,91,9],[100,20,91,10,"runOnUI"],[100,27,91,17],[100,28,91,18,"createTextureFromImage"],[100,50,91,40],[100,51,91,41],[100,52,91,42,"texture"],[100,59,91,49],[100,61,91,51,"image"],[100,66,91,56],[100,67,91,57],[101,6,92,4],[102,4,93,2],[102,5,93,3],[102,7,93,5],[102,8,93,6,"image"],[102,13,93,11],[102,15,93,13,"texture"],[102,22,93,20],[102,23,93,21],[102,24,93,22],[103,4,94,2],[103,11,94,9,"texture"],[103,18,94,16],[104,2,95,0],[104,3,95,1],[105,0,95,2],[105,3]],"functionMap":{"names":["<global>","createTextureFromImage","createTexture","useTexture","useEffect$argument_0","drawAsPicture.then$argument_0","usePictureAsTexture","useImageAsTexture"],"mappings":"AAA;+BCgB;CDiB;sBEE;CFc;0BGE;YCO;YCM;KDE;GDE;CHE;mCME;YFK;GEI;CNE;iCOE;YHG;GGI;CPE"},"hasCjsExports":false},"type":"js/module"}]}