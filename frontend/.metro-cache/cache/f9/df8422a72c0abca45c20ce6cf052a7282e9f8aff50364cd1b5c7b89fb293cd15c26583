{"dependencies":[{"name":"../../skia/core/AnimatedImage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":72},"end":{"line":3,"column":65,"index":137}}],"key":"LhU/Px6ZGN7Mh77TF9+qamLywNY=","exportNames":["*"],"imports":1}},{"name":"./ReanimatedProxy","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":205},"end":{"line":6,"column":36,"index":241}}],"key":"9/hMKtQD5ZrdSt9i8tblq1v6X3Y=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"useAnimatedImageValue\", {\n    enumerable: true,\n    get: function () {\n      return useAnimatedImageValue;\n    }\n  });\n  var _skiaCoreAnimatedImage = require(_dependencyMap[0], \"../../skia/core/AnimatedImage\");\n  var _ReanimatedProxy = require(_dependencyMap[1], \"./ReanimatedProxy\");\n  var Rea = _interopDefault(_ReanimatedProxy);\n  var DEFAULT_FRAME_DURATION = 60;\n  var useAnimatedImageValue = (source, paused) => {\n    var defaultPaused = Rea.default.useSharedValue(false);\n    var isPaused = paused ?? defaultPaused;\n    var currentFrame = Rea.default.useSharedValue(null);\n    var lastTimestamp = Rea.default.useSharedValue(-1);\n    var animatedImage = (0, _skiaCoreAnimatedImage.useAnimatedImage)(source, err => {\n      console.error(err);\n      throw new Error(`Could not load animated image - got '${err.message}'`);\n    });\n    var frameDuration = animatedImage?.currentFrameDuration() || DEFAULT_FRAME_DURATION;\n    Rea.default.useFrameCallback(frameInfo => {\n      if (!animatedImage) {\n        currentFrame.value = null;\n        return;\n      }\n      if (isPaused.value && lastTimestamp.value !== -1) {\n        return;\n      }\n      var timestamp = frameInfo.timestamp;\n      var elapsed = timestamp - lastTimestamp.value;\n\n      // Check if it's time to switch frames based on GIF frame duration\n      if (elapsed < frameDuration) {\n        return;\n      }\n\n      // Update the current frame\n      animatedImage.decodeNextFrame();\n      var oldFrame = currentFrame.value;\n      currentFrame.value = animatedImage.getCurrentFrame();\n      if (oldFrame) {\n        oldFrame.dispose();\n      }\n\n      // Update the last timestamp\n      lastTimestamp.value = timestamp;\n    });\n    return currentFrame;\n  };\n});","lineCount":61,"map":[[12,2,10,0,"Object"],[12,8,10,0],[12,9,10,0,"defineProperty"],[12,23,10,0],[12,24,10,0,"exports"],[12,31,10,0],[13,4,10,0,"enumerable"],[13,14,10,0],[14,4,10,0,"get"],[14,7,10,0],[14,18,10,0,"get"],[14,19,10,0],[15,6,10,0],[15,13,10,0,"useAnimatedImageValue"],[15,34,10,0],[16,4,10,0],[17,2,10,0],[18,2,3,0],[18,6,3,0,"_skiaCoreAnimatedImage"],[18,28,3,0],[18,31,3,0,"require"],[18,38,3,0],[18,39,3,0,"_dependencyMap"],[18,53,3,0],[19,2,6,0],[19,6,6,0,"_ReanimatedProxy"],[19,22,6,0],[19,25,6,0,"require"],[19,32,6,0],[19,33,6,0,"_dependencyMap"],[19,47,6,0],[20,2,6,0],[20,6,6,0,"Rea"],[20,9,6,0],[20,12,6,0,"_interopDefault"],[20,27,6,0],[20,28,6,0,"_ReanimatedProxy"],[20,44,6,0],[21,2,8,0],[21,6,8,6,"DEFAULT_FRAME_DURATION"],[21,28,8,28],[21,31,8,31],[21,33,8,33],[22,2,10,7],[22,6,10,13,"useAnimatedImageValue"],[22,27,10,34],[22,30,10,37,"useAnimatedImageValue"],[22,31,11,2,"source"],[22,37,11,25],[22,39,12,2,"paused"],[22,45,12,31],[22,50,13,5],[23,4,14,2],[23,8,14,8,"defaultPaused"],[23,21,14,21],[23,24,14,24,"Rea"],[23,27,14,27],[23,28,14,27,"default"],[23,35,14,27],[23,36,14,28,"useSharedValue"],[23,50,14,42],[23,51,14,43],[23,56,14,48],[23,57,14,49],[24,4,15,2],[24,8,15,8,"isPaused"],[24,16,15,16],[24,19,15,19,"paused"],[24,25,15,25],[24,29,15,29,"defaultPaused"],[24,42,15,42],[25,4,16,2],[25,8,16,8,"currentFrame"],[25,20,16,20],[25,23,16,23,"Rea"],[25,26,16,26],[25,27,16,26,"default"],[25,34,16,26],[25,35,16,27,"useSharedValue"],[25,49,16,41],[25,50,16,58],[25,54,16,62],[25,55,16,63],[26,4,17,2],[26,8,17,8,"lastTimestamp"],[26,21,17,21],[26,24,17,24,"Rea"],[26,27,17,27],[26,28,17,27,"default"],[26,35,17,27],[26,36,17,28,"useSharedValue"],[26,50,17,42],[26,51,17,43],[26,52,17,44],[26,53,17,45],[26,54,17,46],[27,4,18,2],[27,8,18,8,"animatedImage"],[27,21,18,21],[27,24,18,24],[27,28,18,24,"useAnimatedImage"],[27,50,18,40],[27,51,18,40,"useAnimatedImage"],[27,67,18,40],[27,69,18,41,"source"],[27,75,18,47],[27,77,18,50,"err"],[27,80,18,53],[27,84,18,58],[28,6,19,4,"console"],[28,13,19,11],[28,14,19,12,"error"],[28,19,19,17],[28,20,19,18,"err"],[28,23,19,21],[28,24,19,22],[29,6,20,4],[29,12,20,10],[29,16,20,14,"Error"],[29,21,20,19],[29,22,20,20],[29,62,20,60,"err"],[29,65,20,63],[29,66,20,64,"message"],[29,73,20,71],[29,76,20,74],[29,77,20,75],[30,4,21,2],[30,5,21,3],[30,6,21,4],[31,4,22,2],[31,8,22,8,"frameDuration"],[31,21,22,21],[31,24,23,4,"animatedImage"],[31,37,23,17],[31,39,23,19,"currentFrameDuration"],[31,59,23,39],[31,60,23,40],[31,61,23,41],[31,65,23,45,"DEFAULT_FRAME_DURATION"],[31,87,23,67],[32,4,25,2,"Rea"],[32,7,25,5],[32,8,25,5,"default"],[32,15,25,5],[32,16,25,6,"useFrameCallback"],[32,32,25,22],[32,33,25,24,"frameInfo"],[32,42,25,44],[32,46,25,49],[33,6,26,4],[33,10,26,8],[33,11,26,9,"animatedImage"],[33,24,26,22],[33,26,26,24],[34,8,27,6,"currentFrame"],[34,20,27,18],[34,21,27,19,"value"],[34,26,27,24],[34,29,27,27],[34,33,27,31],[35,8,28,6],[36,6,29,4],[37,6,30,4],[37,10,30,8,"isPaused"],[37,18,30,16],[37,19,30,17,"value"],[37,24,30,22],[37,28,30,26,"lastTimestamp"],[37,41,30,39],[37,42,30,40,"value"],[37,47,30,45],[37,52,30,50],[37,53,30,51],[37,54,30,52],[37,56,30,54],[38,8,31,6],[39,6,32,4],[40,6,33,4],[40,10,33,12,"timestamp"],[40,19,33,21],[40,22,33,26,"frameInfo"],[40,31,33,35],[40,32,33,12,"timestamp"],[40,41,33,21],[41,6,34,4],[41,10,34,10,"elapsed"],[41,17,34,17],[41,20,34,20,"timestamp"],[41,29,34,29],[41,32,34,32,"lastTimestamp"],[41,45,34,45],[41,46,34,46,"value"],[41,51,34,51],[43,6,36,4],[44,6,37,4],[44,10,37,8,"elapsed"],[44,17,37,15],[44,20,37,18,"frameDuration"],[44,33,37,31],[44,35,37,33],[45,8,38,6],[46,6,39,4],[48,6,41,4],[49,6,42,4,"animatedImage"],[49,19,42,17],[49,20,42,18,"decodeNextFrame"],[49,35,42,33],[49,36,42,34],[49,37,42,35],[50,6,43,4],[50,10,43,10,"oldFrame"],[50,18,43,18],[50,21,43,21,"currentFrame"],[50,33,43,33],[50,34,43,34,"value"],[50,39,43,39],[51,6,44,4,"currentFrame"],[51,18,44,16],[51,19,44,17,"value"],[51,24,44,22],[51,27,44,25,"animatedImage"],[51,40,44,38],[51,41,44,39,"getCurrentFrame"],[51,56,44,54],[51,57,44,55],[51,58,44,56],[52,6,45,4],[52,10,45,8,"oldFrame"],[52,18,45,16],[52,20,45,18],[53,8,46,6,"oldFrame"],[53,16,46,14],[53,17,46,15,"dispose"],[53,24,46,22],[53,25,46,23],[53,26,46,24],[54,6,47,4],[56,6,49,4],[57,6,50,4,"lastTimestamp"],[57,19,50,17],[57,20,50,18,"value"],[57,25,50,23],[57,28,50,26,"timestamp"],[57,37,50,35],[58,4,51,2],[58,5,51,3],[58,6,51,4],[59,4,52,2],[59,11,52,9,"currentFrame"],[59,23,52,21],[60,2,53,0],[60,3,53,1],[61,0,53,2],[61,3]],"functionMap":{"names":["<global>","useAnimatedImageValue","useAnimatedImage$argument_1","Rea.useFrameCallback$argument_0"],"mappings":"AAA;qCCS;iDCQ;GDG;uBEI;GF0B;CDE"},"hasCjsExports":false},"type":"js/module"}]}